function translate(e){var t=jQuery("#new_translate_button").data("google-key");jQuery(".trans").each(function(i,n){var o=jQuery(n);jQuery.ajax({url:"https://ajax.googleapis.com/ajax/services/language/translate?key="+t+"&callback=?&v=1.0&langpair=%7C"+e,dataType:"json",data:{q:o.html()},headers:{"X-HTTP-Method-Override":"GET"},type:"POST",success:function(e){e&&e.responseData&&e.responseData.translatedText&&o.html(e.responseData.translatedText)}})})}function load_map_wrapper(e){map_loaded?e&&window[e]&&window[e]():(!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=document.location.protocol+"//maps.google.com/maps/api/js?v=3.5&sensor=false&callback="+e+"&language=en";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}(),map_loaded=!0)}function isValidDate(e){return"[object Date]"!==Object.prototype.toString.call(e)?!1:!isNaN(e.getTime())}function lwlb_signup_button_click(){jQuery("#intended_action").val("signup"),jQuery("#lwlb_signup_spinner").show(),jQuery("#lwlb_signup_button").hide(),jQuery("#message_form").submit()}function lwlb_login_button_click(){jQuery("#intended_action").val("login"),jQuery("#lwlb_login_spinner").show(),jQuery("#lwlb_login_button").hide(),jQuery("#message_form").submit(),Mixpanel.track("page3.contact_me.submit.signin.submit")}function lwlb_hide_and_reset(e){page3Slideshow.enableKeypressListener(),lwlb_hide(e),"undefined"!=typeof lwlb_reset_messaging&&lwlb_reset_messaging()}function check_inputs(e,t,i){return e="undefined"!=typeof e?e:!0,t="undefined"!=typeof t?t:"checkin",i="undefined"!=typeof i?i:"checkout",calendar_is_not_set_date(t)?(e&&calendar_show_cal(t),!1):calendar_is_not_set_date(i)?(e&&calendar_show_cal(i),!1):!0}function copy_checkin_checkout_fields(){var e=check_inputs(!1);e&&(jQuery("#message_checkin").val(jQuery("#checkin").val()),jQuery("#message_checkout").val(jQuery("#checkout").val()),jQuery("#message_number_of_guests").val(jQuery("#number_of_guests").val()),check_availability_of_dates())}function copy_message_fields_to_book_it(){jQuery("#checkin").val(jQuery("#message_checkin").val()),jQuery("#checkout").val(jQuery("#message_checkout").val()),jQuery("#number_of_guests").val(jQuery("#message_number_of_guests").val())}function refresh_subtotal(){var e=function(e){var t;e.available?(jQuery("#book_it_disabled").hide(),jQuery("#book_it_enabled").show(),t=jQuery("#price_amount").html(e.price_per_night).data("nightly-price",e.price_per_night),jQuery("#service_fee").html(e.service_fee),CogzidelRooms.staggered=e.staggered,CogzidelRooms.staggered===!0?(0!==CogzidelRooms.stayOffered&&(jQuery("#payment_period").hide(),jQuery("#per_month").show(),CogzidelRooms.$cancellationVal.text(Translations.long_term),jQuery("#includesFees").show(),jQuery("#book_it_default").addClass("monthly")),jQuery("#subtotal_area").hide(),jQuery("#show_more_subtotal_info").hide(),jQuery("#price_amount").text(Cogzidel.Utils.decode(e.staggered_price)),t.data("monthly-price",e.staggered_price),CogzidelRooms.hideMonthlyPriceDetails()):(2===CogzidelRooms.stayOffered&&(jQuery("#per_month").hide(),CogzidelRooms.$cancellationVal.text(CogzidelRooms.originalCancellationPolicy),jQuery("#includesFees").hide(),jQuery("#book_it_default").removeClass("monthly"),jQuery("#payment_period").show()),jQuery("#subtotal_area ").show(),jQuery("#subtotal_area").find("p").show(),jQuery("#show_more_subtotal_info").show(),jQuery("#subtotal").html(e.total_price),jQuery("#payment_period").val("per_night"),t.removeAttr("data-monthly-price"),CogzidelRooms.showMonthlyPriceDetails()),e.can_instant_book?Page3.showInstantBookButton():Page3.showBookItButton()):(1===CogzidelRooms.stayOffered?(jQuery("#payment_period").hide(),jQuery("#per_month").show(),CogzidelRooms.$cancellationVal.text(Translations.long_term),jQuery("#includesFees").show(),CogzidelRooms.hideMonthlyPriceDetails()):(jQuery("#book_it_default").removeClass("monthly"),jQuery("#payment_period").show(),jQuery("#per_month").hide(),CogzidelRooms.$cancellationVal.text(CogzidelRooms.originalCancellationPolicy),jQuery("#includesFees").hide(),jQuery("#price_amount").html(jQuery("#price_amount").data("nightly-price")),CogzidelRooms.showMonthlyPriceDetails()),jQuery("#book_it_disabled_message").html(e.reason_message),jQuery("#book_it_enabled").hide(),jQuery("#book_it_disabled").show(),jQuery("#show_more_subtotal_info").hide()),jQuery("#book_it_status").pulsate(1,600)};jQuery("#book_it_button").removeAttr("disabled"),jQuery("#subtotal_area").find("p").hide(),jQuery("#subtotal_area").show(),calendar_is_not_set_date("checkin")||calendar_is_not_set_date("checkout")?(e=function(){},jQuery("#book_it_disabled").hide(),jQuery("#book_it_enabled").show(),jQuery("#subtotal_area").hide(),jQuery("#show_more_subtotal_info").hide()):jQuery("#subtotal, #book_it_disabled_message").html('<img src="'+base_url+'images/spinner.gif" alt="" height="16" width="16" />'),jQuery.getJSON(base_url+"rooms/ajax_refresh_subtotal",jQuery("#book_it_form").serialize(),e)}function setup_lwlb_contact(){copy_checkin_checkout_fields(),lwlb_show("lwlb_contact"),page3Slideshow.disableKeypressListener(),jQuery.getJSON(ajax_already_messaged_url,function(e){e.has_already_messaged&&jQuery("#messaging-errors").addClass("contacted-before")})}function load_google_map(){var e=[],t=new google.maps.LatLng(jQuery("#map").data("lat"),jQuery("#map").data("lng")),i=new google.maps.LatLngBounds;if(i.extend(t),CogzidelRooms.inIsrael)document.getElementById("map").innerHTML='<iframe width="639" height="470" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="/rooms/israel_map?id='+CogzidelRooms.hostingId+'">';else{jQuery("#map").cogzidelMap({position:t,isFuzzy:!0});var n=jQuery("#map").cogzidelMap().map,o=new google.maps.InfoWindow({maxWidth:160,zIndex:0});google.maps.event.addListener(n,"click",function(){o.close()});var a=!1;jQuery("#guidebook-recommendations li").each(function(t,s){a=!0;var r=jQuery(s),l=new google.maps.LatLng(r.data("lat"),r.data("lng")),h=new google.maps.Marker({clickable:!0,position:l,map:n,zIndex:1,icon:new google.maps.MarkerImage(jQuery("img",r).attr("src"),null,null,new google.maps.Point(11,37))});google.maps.event.addListener(h,"click",function(){o.setContent('<address style="color:#808080"><p style="color:#E0007A;font-weight:bold;">'+jQuery("h2",r).html()+"</p><p>"+jQuery("span.location",r).html()+"</p><p><span>"+jQuery("span.city",r).html()+"</span>, <span>"+jQuery("span.state",r).html()+"</span> <span>"+jQuery("span.zipcode",r).html()+'</span></p></address><p style="margin-top: 10px">'+jQuery("div.description",r).html()+"</p>"),o.open(n,h)}),e.push(h),i.extend(l)}),a&&(n.fitBounds(i),google.maps.event.addListenerOnce(n,"bounds_changed",function(){this.getZoom()>14&&this.setZoom(14)}))}}!function(e,t){var i=e.PhoneNumberInputWidget=function(e){this.init(e)};i.prototype={prefix:null,init:function(e){this.element=t(e.element),this.elements=t.extend({},{}),this.options=t.extend({},e||{}),this.$("select").change(this.proxy(this.countryChangeHandler)),this.$("input.pniw-number").keypress(this.proxy(this.numberKeypressHandler)).change(this.proxy(this.numberChangeHandler)),this.countryChangeHandler(),this.options.country&&this.setCountry(this.options.country),this.options.number&&this.setNumber(this.options.number)},setCountry:function(e){this.$("select").find('option[value="'+e+'"]').attr("selected","selected").change()},setNumber:function(e){var t=this.getPrefix(),i=(e+"").replace(new RegExp("^"+t),"");this.$("input.pniw-number").val(i),this.updateHiddenField()},getNumber:function(){var e=this.getPrefix(),i=this.$("input.pniw-number").val();return t.trim(e+i)},getCountry:function(){return this.$("select").val()},countryChangeHandler:function(){var e=this.getCountry();this.prefix=this.$('option[value="'+e+'"]').data("prefix"),this.$(".pniw-number-prefix").text("+"+this.getPrefix()),this.updateHiddenField()},getPrefix:function(){return this.prefix},setError:function(e){this.$("input.pniw-number").toggleClass("error",e)},numberKeypressHandler:function(e,i){var n=t(e);return t.trim(n.val().length)&&this.setError(!1),13===i.which?!1:void 0},numberChangeHandler:function(){this.updateHiddenField()},updateHiddenField:function(){this.$('input[type="hidden"]').val(this.getNumber())},$:function(e,t){return(t||"undefined"==typeof this.elements[e])&&(this.elements[e]=this.element.find(e)),this.elements[e]},proxy:function(e){var t=this;return function(i){return e.call(t,this,i)}}},t.fn.phoneNumberInputWidget=function(){return this.each(function(e,n){var o=new i({element:n});t(this).data("phoneNumberInputWidget",o)})},t.phoneNumberInputWidget=function(){t("div.phone-number-input-widget").phoneNumberInputWidget()}}(Cogzidel,jQuery),function(e,t){var i=e.PhoneNumberVerifyWidget=function(e){this.init(e)};i.prototype={ajaxUrl:"/phone_numbers/phone_number_verify_widget",init:function(e){var i=this;this.elements=t.extend({},{}),this.options=t.extend({},e||{}),e.element?(this.element=t(e.element),i.initCallback()):(t.colorbox.loading(),t.get(this.ajaxUrl,function(e){t.colorbox({html:e}),i.element=t("#colorbox .phone-number-add-widget"),i.initCallback()}))},initCallback:function(){this.$('.pnaw-verify-container a[rel="sms"], .pnaw-verify-container a[rel="call"]').click(this.proxy(this.stepOneHandler)),this.$('.pnaw-verify-container a[rel="verify"]').click(this.proxy(this.stepTwoHandler)),this.$('.pnaw-verify-container a[rel="cancel"]').click(this.proxy(this.cancelHandler)),this.$("#phone_number_verification").keypress(this.proxy(this.codeKeypressHandler)),this.phoneNumberInputWidget=this.$(".phone-number-input-widget").data("phoneNumberInputWidget"),this.options.country&&this.setCountry(this.options.country),this.options.number&&this.setNumber(this.options.number)},setCountry:function(e){this.phoneNumberInputWidget.setCountry(e)},setNumber:function(e){this.phoneNumberInputWidget.setNumber(e)},getPrefix:function(){return this.phoneNumberInputWidget.getPrefix()},getNumber:function(){return this.phoneNumberInputWidget.getNumber()},getCountry:function(){return this.phoneNumberInputWidget.getCountry()},codeKeypressHandler:function(e,t){return 13===t.which?(this.$('.pnaw-verify-container a[rel="verify"]').click(),!1):void 0},cancelHandler:function(){this.finish(!1),this.element.trigger("cancel")},verifyNumber:function(e,i,n){var o=this,a="/phone_numbers/create",e=t.trim(e),s={phone_number:e,phone_type:n,phone_number_country:i};this.setLoading(!0),this.stepOneXhr=t.post(a,s,function(e){o.setLoading(!1),o.stepTwo(),o.element.data("phone_number_id",e.phone_number_id)}).error(function(){o.setLoading(!1),o.phoneNumberInputWidget.setError(!0)})},stepOneHandler:function(e){var i=this.getPrefix()+"",n=this.getNumber()+"",o=t(e).attr("rel"),a=this.getCountry();n===i?this.phoneNumberInputWidget.setError(!0):this.verifyNumber(n,a,o)},stepTwoHandler:function(){var e="/phone_numbers/verify",i=this.$("#phone_number_verification").val(),n={id:this.element.data("phone_number_id"),verification_code:i},o=this;o.setLoading(!0),t.post(e,n,function(e){o.setLoading(!1),"success"===e.result?(o.finish(),o.$(".pnaw-verification-error").hide()):(o.$("#phone_number_verification").val("").animate({left:"-5px"},100,function(){t(this).animate({left:"5px"},100,function(){t(this).animate({left:0},100)})}),o.$(".pnaw-verification-error").fadeIn(200).text(e.error))})},stepOne:function(){this.phoneNumberInputWidget.setNumber(""),this.$(".pnaw-step1").show(),this.$(".pnaw-step2").hide()},stepTwo:function(){this.$("#phone_number_verification").val(""),this.$(".pnaw-step1").hide(),this.$(".pnaw-step2").fadeIn(200),this.$(".pnaw-verification-error").hide()},finish:function(e){this.stepOne(),this.options.onComplete&&("undefined"==typeof e||"undefined"!=typeof e&&e)&&this.options.onComplete.call(this),this.element.trigger("complete"),t(document).trigger("phone_number_verify_widget.complete"),t.colorbox.close()},setLoading:function(e){e?this.element.addClass("loading"):this.element.removeClass("loading")},$:function(e,t){return(t||"undefined"==typeof this.elements[e])&&(this.elements[e]=this.element.find(e)),this.elements[e]},proxy:function(e){var t=this;return function(i){return e.call(t,this,i)}}},t.fn.phoneNumberVerifyWidget=function(){return this.each(function(e,n){var o=new i({element:n});t(this).data("phoneNumberVerifyWidget",o)})},t.phoneNumberVerifyWidget=function(){t("div.phone-number-add-widget").phoneNumberVerifyWidget()}}(Cogzidel,jQuery),function(e,t){var i=e.PhoneNumberWidget=function(e,t){this.init(e,t)};i.prototype={ajaxUrl:"/phone_numbers/phone_number_widget",init:function(e,i){var n=this;this.options=i||{},this.element=t(e),this.$add=this.element.find("a.add"),this.$addWidget=this.element.find(".phone-number-add-widget:first"),this.$verifyWidget=this.element.find(".phone-number-add-widget:last"),this.$table=this.element.find(".phone-numbers-table"),this.$noPhoneNumbers=this.element.find(".no-phone-numbers"),this.$hideDuringVerify=this.element.find(".phone-numbers-hide-during-verify"),this.element.delegate("a.remove","click",this.proxy(this.removeHandler)),this.element.delegate("a.verify","click",this.proxy(this.verifyHandler)),this.$add.click(this.proxy(this.addHandler)),this.$addWidget.bind("complete",this.proxy(this.completeAddHandler)),this.addWidget=new Cogzidel.PhoneNumberVerifyWidget({element:this.$addWidget,onComplete:function(){n.onVerifyComplete()}}),this.verifyWidget=new Cogzidel.PhoneNumberVerifyWidget({element:this.$verifyWidget,onComplete:function(){n.onVerifyComplete()}}),this.$verifyWidget.bind("cancel",this.proxy(this.verifyCancelHandler)),this.options.showAddNumberInitially&&0===this.$table.children().length&&(this.$addWidget.show(),this.$add.hide(),this.$noPhoneNumbers.hide()),this.options.noCancel&&this.element.addClass("noCancel")},verifyHandler:function(e){var i=t(e),n=i.parents("tr"),o=n.data("number"),a=n.data("country"),s=i.attr("rel"),r=n.data("id");this.$add.show(),this.$addWidget.hide(),this.$verifyWidget.data("phone_number_id",r),this.verifyWidget.verifyNumber(o,a,s),this.verifyWidget.stepTwo(),this.verifyWidget.setLoading(!1),this.$verifyWidget.show(),this.$hideDuringVerify.hide()},verifyCancelHandler:function(){this.$hideDuringVerify.show(),this.$verifyWidget.hide(),this.verifyWidget.stepOneXhr&&this.verifyWidget.stepOneXhr.abort()},onVerifyComplete:function(){var e,i=this;this.options.onVerifyComplete&&(e=this.options.onVerifyComplete.call(this)),e!==!1&&(i.element.addClass("loading"),t.get(i.ajaxUrl,function(e){i.element.replaceWith(e),t.phoneNumberWidget(i.options)})),this.$hideDuringVerify.show(),this.$hideDuringVerify.unbind("cancel")},completeAddHandler:function(){this.$add.show(),this.$addWidget.slideUp(200)},removeHandler:function(e){var i=t(e),n=i.attr("href"),o=this;return t.post(n),i.parents("tr").fadeOut(200,function(){t(this).remove(),o.element.find("table.phone-numbers-table tr").length?o.element.addClass("has-phone-numbers"):o.element.removeClass("has-phone-numbers")}),!1},addHandler:function(){this.$add.hide(),this.$addWidget.slideDown(200)},proxy:function(e){var t=this;return function(i){return e.call(t,this,i)}}},t.fn.phoneNumberWidget=function(e){return this.each(function(t,n){new i(n,e)})},t.phoneNumberWidget=function(e){t("div.phone-numbers-container").phoneNumberWidget(e)},e.PhoneNumberWidget=i}(Cogzidel,jQuery);var photo_gallery_loaded=!1,initPhotoGallery=function(){photo_gallery_loaded||(photo_gallery_loaded=!0,jQuery("#galleria_container").galleria({clicknext:!0,counter:!1,height:491,imagePosition:"top",transition:"fade",transitionSpeed:100,thumbFit:!1,width:639}))},Page3={showInstantBookButton:function(){jQuery("#book_it_button").addClass("force_hide"),jQuery("#instant_book_it_button").removeClass("force_hide").removeAttr("disabled"),jQuery("#instant_book_arrow").removeClass("force_hide")},showBookItButton:function(){jQuery("#instant_book_it_button").addClass("force_hide"),jQuery("#book_it_button").removeClass("force_hide"),jQuery("#instant_book_arrow").addClass("force_hide")},modal_log:function(e){Statsd&&Statsd.increment("p3.modals."+e)}},page3Slideshow={keypressListenerEnabled:!1,freezeSlideshowControls:!1,deactivateSlideshowControls:function(){setTimeout(function(){page3Slideshow.freezeSlideshowControls=!1},200)},galleriaLoaded:function(){var e=void 0!==Galleria.get(0);return e},enableKeypressListener:function(){if(page3Slideshow.keypressListenerEnabled===!1){if(!this.galleriaLoaded())return;var e=Galleria.get(0);jQuery(document.documentElement).bind("keydown",function(t){if(page3Slideshow.freezeSlideshowControls===!1&&page3Slideshow.galleriaLoaded()===!0){var i=t.keyCode||t.which;i==jQuery.ui.keyCode.LEFT?(e.prev(),page3Slideshow.freezeSlideshowControls=!0):i==jQuery.ui.keyCode.RIGHT&&(e.next(),page3Slideshow.freezeSlideshowControls=!0),page3Slideshow.deactivateSlideshowControls()}}),page3Slideshow.keypressListenerEnabled=!0}},disableKeypressListener:function(){jQuery(document.documentElement).unbind("keydown"),page3Slideshow.keypressListenerEnabled=!1}},map_loaded=!1,load_pano=function(){var e,t=jQuery("#pano").data("streetView");if(!t){var i=jQuery("#pano").data("lat"),n=jQuery("#pano").data("lng"),o=new google.maps.LatLng(i,n),a=new google.maps.StreetViewPanorama(document.getElementById("pano"),{position:o,visible:!1,scrollwheel:!1,enableCloseButton:!1});(new google.maps.StreetViewService).getPanoramaByLocation(o,50,function(t,i){return i!==google.maps.StreetViewStatus.OK?(jQuery("#pano_error").show(),jQuery("#pano_no_error").hide(),void 0):(a.setPosition(t.location.latLng),a.setVisible(!0),e=window.setInterval(function(){if(jQuery("#auto_pan_pano").is(":checked")){var e=a.getPov();e.heading+=2,a.setPov(e)}},200),void 0)}),jQuery("#pano").data("streetView",a)}},CogzidelRooms={init:function(e){function t(){window.FB&&FB.Event&&FB.Event.subscribe&&(FB.Event.subscribe("edge.create",function(e){_gaq.push(["_trackSocial","facebook","like",e])}),FB.Event.subscribe("edge.remove",function(e){_gaq.push(["_trackSocial","facebook","unlike",e])}))}this.options=e||{},window.FB?t():jQuery(document).bind("fbInit",t),e.inIsrael&&(this.inIsrael=e.inIsrael),e.hostingId&&(this.hostingId=e.hostingId),void 0!==e.staggered&&(this.staggered=e.staggered),void 0!==e.staggeredPrice&&(this.staggeredPrice=e.staggeredPrice),void 0!==e.stayOffered&&(this.stayOffered=e.stayOffered),this.$cancellationVal=jQuery("#cancellation_val").find("a"),this.originalCancellationPolicy=this.$cancellationVal.text(),jQuery("#book_it_default").removeClass("monthly"),jQuery("#per_month").hide(),jQuery("#includesFees").hide(),void 0!==e.isMonthly&&(this.isMonthly=e.isMonthly,this.isMonthly===!0&&(jQuery("#subtotal_area").find("p").hide(),jQuery("#book_it_default").addClass("monthly"),jQuery("#per_month").show(),this.$cancellationVal.text(Translations.long_term),jQuery("#includesFees").show(),this.hideMonthlyPriceDetails())),this.dateFormat=jQuery.datepicker._defaults.dateFormat,jQuery("#book_it_form").cogzidelInputDateSpan({onCheckinClose:refresh_subtotal,onCheckoutClose:refresh_subtotal});var i=jQuery("#price_amount");i.data("nightly-price",e.nightlyPrice),i.data("weekly-price",e.weeklyPrice),i.data("monthly-price",e.monthlyPrice),this.isMonthly||i.html(i.data("nightly-price")),jQuery("#checkin").val(this.dateFormat),jQuery("#checkout").val(this.dateFormat),jQuery("#contact_wrapper").live("click",this.proxy(this.contactMeHandler)),document.location.hash&&jQuery("a[href='"+document.location.hash+"']").parent().click(),jQuery("#photos_div").is(":visible")&&initPhotoGallery(),jQuery("#show_more_user_info1").click(CogzidelRooms.user_info_toggle),jQuery("#payment_period").change(function(){{var e,t,i=jQuery("#price_amount");jQuery("#subtotal_area"),jQuery("#show_more_subtotal_info")}switch(this.value){case"per_night":i.html(i.data("nightly-price")),jQuery("#includesFees").hide();break;case"per_week":e=i.data("weekly-price"),t=parseInt(e.match(/\d+/),10),i.html(e.replace(/(\d+)/,t)),jQuery("#includesFees").hide();break;case"per_month":1===CogzidelRooms.stayOffered||2===CogzidelRooms.stayOffered?(e=""+CogzidelRooms.staggeredPrice,jQuery("#includesFees").show()):(e=i.data("monthly-price"),jQuery("#includesFees").hide()),t=parseInt(e.match(/\d+/),10),i.html(e.replace(/(\d+)/,t))}});var n=jQuery("#videos_div embed");n.before('<param name="wmode" value="opaque" />'),n.attr("wmode","opaque"),jQuery("#reputation .pagination a").live("click",function(){var e=jQuery(this);return e.parent().append('<img src="/images/spinner.gif" class="spinner" height="16" width="16" alt="" />'),jQuery.ajax({url:e.attr("href"),success:function(t){e.closest(".rep_content").html(t),jQuery("html, body").animate({scrollTop:jQuery("#reputation").offset().top},"slow")}}),!1});var o=jQuery("#reputation"),a=o.data("review-type"),s=o.data("hosting-id");switch(a){case"listing_has_reviews":select_tab("rep","this_hosting_reviews",jQuery("#this_hosting_reviews_link")),jQuery.ajax({url:"/rooms/this_hosting_reviews_first/"+s,success:function(e){""!==jQuery.trim(e)&&jQuery("#this_hosting_reviews").html(e)}});break;case"host_has_reviews":select_tab("rep","other_hosting_reviews",jQuery("#other_hosting_reviews_link")),jQuery.ajax({url:"/rooms/other_hosting_reviews_first/"+s,success:function(e){""!==jQuery.trim(e)&&jQuery("#other_hosting_reviews").html(e)}});break;case"host_has_recommendations":select_tab("rep","friends",jQuery("#friends_link"));break;case"no_reviews":default:select_tab("rep","this_hosting_reviews",jQuery("#this_hosting_reviews_link"))}e.otherHostingPrices&&(jQuery("#my_other_listings").show(),jQuery.each(e.otherHostingPrices,function(e,t){jQuery("#hosting_"+e+"_nightly_price").html(t)})),e.videoProfile&&(this.videoProfile=e.videoProfile,this.videoID=e.videoID,this.videoProfile===!0&&(jQuery(".profile_pic").addClass("video"),jQuery("._pm_inner").find("img").hover(function(){jQuery("._pm_inner").toggleClass("hover")},function(){jQuery("._pm_inner").toggleClass("hover")}))),$(".twitter-share-button").click(function(e){var t=this.href;Cogzidel.tweetHashTags&&(t+=encodeURIComponent(" "+Cogzidel.tweetHashTags)),popup(t,"fixed",335,500),e.preventDefault()})},showMonthlyPriceDetails:function(){jQuery("#monthly_price_string").parent().parent().show(),jQuery("#weekly_price_string").parent().parent().show()},hideMonthlyPriceDetails:function(){jQuery("#monthly_price_string").parent().parent().hide(),jQuery("#weekly_price_string").parent().parent().hide()},proxy:function(e){var t=this;return function(){return e.call(t,this)}},contactMeHandler:function(){this.loadContactLwlb()},loadContactLwlb:function(){var e=jQuery("#contact_wrapper"),t=this;e.attr("disabled","disabled"),jQuery("#question").attr("disabled","disabled"),jQuery("#question_holder").css("opacity","0.5"),Page3.modal_log("contact_me_clicked"),Mixpanel.track("page3.contact_me.click"),jQuery("#lwlb_contact_container").load(ajax_lwlb_contact_url,null,function(){jQuery("#message_checkin").val(t.dateFormat),jQuery("#message_checkout").val(t.dateFormat),e.removeAttr("disabled"),setup_lwlb_contact(),jQuery("#message_form").cogzidelInputDateSpan({onCheckinClose:check_availability_of_dates,onCheckoutClose:check_availability_of_dates})})},Helper:{},user_info_toggle:function(){jQuery("#more_info_text, #less_info_text").toggle(),jQuery("#more_info_arrow").toggleClass("contract"),jQuery("#more_info1").toggle()},video_profile_init:function(){},staggered:!1,hostingLengthType:0,inIsrael:!1};if(function(e){var t,i=this,n=i.document,o=e(n),a=!1,s=navigator.userAgent.toLowerCase(),r=i.location.hash.replace(/#\//,""),l=function(){return v.TOUCH?"touchstart":"click"},h=function(){var e=3,i=n.createElement("div"),o=i.getElementsByTagName("i");do i.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->";while(o[0]);return e>4?e:t}(),u=function(){return{html:n.documentElement,body:n.body,head:n.getElementsByTagName("head")[0],title:n.title}},c="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",d=function(){var t=[];return e.each(c.split(" "),function(e,i){t.push(i),/_/.test(i)&&t.push(i.replace(/_/g,""))}),t}(),p=function(t){var i;return"object"!=typeof t?t:(e.each(t,function(n,o){/^[a-z]+_/.test(n)&&(i="",e.each(n.split("_"),function(e,t){i+=e>0?t.substr(0,1).toUpperCase()+t.substr(1):t}),t[i]=o,delete t[n])}),t)},g=function(t){return e.inArray(t,d)>-1?v[t.toUpperCase()]:t},f={trunk:{},add:function(e,t,n,o){if(o=o||!1,this.clear(e),o){var a=t;t=function(){a(),f.add(e,t,n)}}this.trunk[e]=i.setTimeout(t,n)},clear:function(e){var t,n=function(e){i.clearTimeout(this.trunk[e]),delete this.trunk[e]};if(e&&e in this.trunk)n.call(f,e);else if("undefined"==typeof e)for(t in this.trunk)this.trunk.hasOwnProperty(t)&&n.call(f,t)}},m=[],y=function(){return{array:function(e){return Array.prototype.slice.call(e)},create:function(e,t){t=t||"div";var i=n.createElement(t);return i.className=e,i},forceStyles:function(t,i){t=e(t),t.attr("style")&&t.data("styles",t.attr("style")).removeAttr("style"),t.css(i)},revertStyles:function(){e.each(y.array(arguments),function(t,i){i=e(i).removeAttr("style"),i.data("styles")&&i.attr("style",i.data("styles")).data("styles",null)})},moveOut:function(e){y.forceStyles(e,{position:"absolute",left:-1e4})},moveIn:function(){y.revertStyles.apply(y,y.array(arguments))},hide:function(t,i,n){t=e(t),t.data("opacity")||t.data("opacity",t.css("opacity"));var o={opacity:0};i?t.stop().animate(o,i,n):t.css(o)},show:function(t,i,n){t=e(t);var o=parseFloat(t.data("opacity"))||1,a={opacity:o};i?t.stop().animate(a,i,n):t.css(a)},addTimer:function(){return f.add.apply(f,y.array(arguments)),this},clearTimer:function(){return f.clear.apply(f,y.array(arguments)),this},wait:function(t){t=e.extend({until:function(){return!1},success:function(){},error:function(){v.raise("Could not complete wait function.")},timeout:3e3},t);var n,o,a=y.timestamp(),s=function(){return o=y.timestamp(),n=o-a,t.until(n)?(t.success(),!1):o>=a+t.timeout?(t.error(),!1):(i.setTimeout(s,2),void 0)};i.setTimeout(s,2)},toggleQuality:function(e,t){7!==h&&8!==h||!e||("undefined"==typeof t&&(t="nearest-neighbor"===e.style.msInterpolationMode),e.style.msInterpolationMode=t?"bicubic":"nearest-neighbor")},insertStyleTag:function(e){var t=n.createElement("style");if(u().head.appendChild(t),t.styleSheet)t.styleSheet.cssText=e;else{var i=n.createTextNode(e);t.appendChild(i)}},loadScript:function(t,i){var n=!1,o=e("<script>").attr({src:t,async:!0}).get(0);o.onload=o.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,o.onload=o.onreadystatechange=null,"function"==typeof i&&i.call(this,this))},u().head.appendChild(o)},parseValue:function(e){if("number"==typeof e)return e;if("string"==typeof e){var t=e.match(/\-?\d/g);return t&&t.constructor===Array?parseInt(t.join(""),10):0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(o,s,r){var l,c,d=!1;return e('link[rel="stylesheet"]').each(function(){return new RegExp(o).test(this.href)?(l=this,!1):void 0}),"function"==typeof s&&(r=s,s=t),r=r||function(){},l?(r.call(l,l),l):(c=n.styleSheets.length,a&&(o+="?"+y.timestamp()),e("#"+s).length?(e("#"+s).attr("href",o),c--,d=!0):(l=e("<link>").attr({rel:"stylesheet",href:o,id:s}).get(0),i.setTimeout(function(){var t=e('link[rel="stylesheet"], style');t.length?t.get(0).parentNode.insertBefore(l,t[0]):u().head.appendChild(l),h?l.attachEvent("onreadystatechange",function(){"complete"===l.readyState&&(d=!0)}):d=!0},10)),"function"==typeof r&&y.wait({until:function(){return d&&n.styleSheets.length>c},success:function(){y.addTimer("css",function(){r.call(l,l)},100)},error:function(){v.raise("Theme CSS could not load")},timeout:1e4}),l)}}}(),_={fade:function(t,i){e(t.next).css("opacity",0).show().animate({opacity:1},t.speed,i),t.prev&&e(t.prev).css("opacity",1).show().animate({opacity:0},t.speed)},flash:function(t,i){e(t.next).css("opacity",0),t.prev?e(t.prev).animate({opacity:0},t.speed/2,function(){e(t.next).animate({opacity:1},t.speed,i)}):e(t.next).animate({opacity:1},t.speed,i)},pulse:function(t,i){t.prev&&e(t.prev).hide(),e(t.next).css("opacity",0).animate({opacity:1},t.speed,i)},slide:function(t,i){var n=e(t.next).parent(),o=this.$("images"),a=this._stageWidth,s=this.getOptions("easing");n.css({left:a*(t.rewind?-1:1)}),o.animate({left:a*(t.rewind?1:-1)},{duration:t.speed,queue:!1,easing:s,complete:function(){o.css("left",0),n.css("left",0),i()}})},fadeslide:function(t,i){var n=0,o=this.getOptions("easing"),a=this.getStageWidth();t.prev&&(n=y.parseValue(e(t.prev).css("left")),e(t.prev).css({opacity:1,left:n}).animate({opacity:0,left:n+a*(t.rewind?1:-1)},{duration:t.speed,queue:!1,easing:o})),n=y.parseValue(e(t.next).css("left")),e(t.next).css({left:n+a*(t.rewind?-1:1),opacity:0}).animate({opacity:1,left:n},{duration:t.speed,complete:i,queue:!1,easing:o})}},v=function(){var n=this;this._theme=t,this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._initialized=!1,this._stageWidth=0,this._stageHeight=0,this._target=t,this._id=Math.random();var a="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip",s="current total";e.each(a.split(" "),function(e,t){n._dom[t]=y.create("galleria-"+t)}),e.each(s.split(" "),function(e,t){n._dom[t]=y.create("galleria-"+t,"span")});var r=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(e){var t=e.keyCode||e.which;t in r.map&&"function"==typeof r.map[t]&&r.map[t].call(n,e)},attach:function(e){var t,i;for(t in e)e.hasOwnProperty(t)&&(i=t.toUpperCase(),i in r.keys?r.map[r.keys[i]]=e[t]:r.map[i]=e[t]);r.bound||(r.bound=!0,o.bind("keydown",r.press))},detach:function(){r.bound=!1,r.map={},o.unbind("keydown",r.press)}},c=this._controls={0:t,1:t,active:0,swap:function(){c.active=c.active?0:1},getActive:function(){return c[c.active]},getNext:function(){return c[1-c.active]}},d=this._carousel={next:n.$("thumb-nav-right"),prev:n.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var t=0,i=0,o=[0];e.each(n._thumbnails,function(n,a){a.ready&&(t+=a.outerWidth||e(a.container).outerWidth(!0),o[n+1]=t,i=Math.max(i,a.outerHeight||e(a.container).outerHeight(!0)))}),n.$("thumbnails").css({width:t+10,height:i}),d.max=t,d.hooks=o,d.width=n.$("thumbnails-list").width(),d.setClasses(),n.$("thumbnails-container").toggleClass("galleria-carousel",t>d.width),d.width=n.$("thumbnails-list").width()},bindControls:function(){var e;d.next.bind(l(),function(t){if(t.preventDefault(),"auto"===n._options.carouselSteps){for(e=d.current;e<d.hooks.length;e++)if(d.hooks[e]-d.hooks[d.current]>d.width){d.set(e-2);break}}else d.set(d.current+n._options.carouselSteps)}),d.prev.bind(l(),function(t){if(t.preventDefault(),"auto"===n._options.carouselSteps)for(e=d.current;e>=0;e--){if(d.hooks[d.current]-d.hooks[e]>d.width){d.set(e+2);break}if(0===e){d.set(0);break}}else d.set(d.current-n._options.carouselSteps)})},set:function(e){for(e=Math.max(e,0);d.hooks[e-1]+d.width>=d.max&&e>=0;)e--;d.current=e,d.animate()},getLast:function(e){return(e||d.current)-1},follow:function(e){if(0===e||e===d.hooks.length-2)return d.set(e),void 0;for(var t=d.current;d.hooks[t]-d.hooks[d.current]<d.width&&t<=d.hooks.length;)t++;e-1<d.current?d.set(e-1):e+2>t&&d.set(e-t+d.current+2)},setClasses:function(){d.prev.toggleClass("disabled",!d.current),d.next.toggleClass("disabled",d.hooks[d.current]+d.width>=d.max)},animate:function(){d.setClasses();var e=-1*d.hooks[d.current];isNaN(e)||n.$("thumbnails").animate({left:e},{duration:n._options.carouselSpeed,easing:n._options.easing,queue:!1})}},p=this._tooltip={initialized:!1,open:!1,init:function(){p.initialized=!0;
var e=".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}";y.insertStyleTag(e),n.$("tooltip").css("opacity",.8),y.hide(n.get("tooltip"))},move:function(e){var t=n.getMousePosition(e).x,i=n.getMousePosition(e).y,o=n.$("tooltip"),a=t,s=i,r=o.outerHeight(!0)+1,l=o.outerWidth(!0),h=r+15,u=n.$("container").width()-l-2,c=n.$("container").height()-r-2;isNaN(a)||isNaN(s)||(a+=10,s-=30,a=Math.max(0,Math.min(u,a)),s=Math.max(0,Math.min(c,s)),h>i&&(s=h),o.css({left:a,top:s}))},bind:function(t,i){p.initialized||p.init();var o=function(t,i){p.define(t,i),e(t).hover(function(){y.clearTimer("switch_tooltip"),n.$("container").unbind("mousemove",p.move).bind("mousemove",p.move).trigger("mousemove"),p.show(t),v.utils.addTimer("tooltip",function(){n.$("tooltip").stop().show(),y.show(n.get("tooltip"),400),p.open=!0},p.open?0:500)},function(){n.$("container").unbind("mousemove",p.move),y.clearTimer("tooltip"),n.$("tooltip").stop(),y.hide(n.get("tooltip"),200,function(){n.$("tooltip").hide(),y.addTimer("switch_tooltip",function(){p.open=!1},1e3)})})};"string"==typeof i?o(t in n._dom?n.get(t):t,i):e.each(t,function(e,t){o(n.get(e),t)})},show:function(t){t=e(t in n._dom?n.get(t):t);var o=t.data("tt"),a=function(e){i.setTimeout(function(e){return function(){p.move(e)}}(e),10),t.unbind("mouseup",a)};o="function"==typeof o?o():o,o&&(n.$("tooltip").html(o.replace(/\s/,"&nbsp;")),t.bind("mouseup",a))},define:function(t,i){if("function"!=typeof i){var o=i;i=function(){return o}}t=e(t in n._dom?n.get(t):t).data("tt",i),p.show(t)}},g=this._fullscreen={scrolled:0,active:!1,keymap:n._keyboard.map,enter:function(t){g.active=!0,y.hide(n.getActiveImage()),n.$("container").addClass("fullscreen"),g.scrolled=e(i).scrollTop(),y.forceStyles(n.get("container"),{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4});var o={height:"100%",overflow:"hidden",margin:0,padding:0},a=n.getData();if(y.forceStyles(u().html,o),y.forceStyles(u().body,o),g.keymap=e.extend({},n._keyboard.map),n.attachKeyboard({escape:n.exitFullscreen,right:n.next,left:n.prev}),a&&a.big&&a.image!==a.big){var s=new v.Picture,r=s.isCached(a.big),l=n.getIndex(),h=n._thumbnails[l];n.trigger({type:v.LOADSTART,cached:r,index:l,imageTarget:n.getActiveImage(),thumbTarget:h}),s.load(a.big,function(t){n._scaleImage(t,{complete:function(t){n.trigger({type:v.LOADFINISH,cached:r,index:l,imageTarget:t.image,thumbTarget:h});var i=n._controls.getActive().image;i&&e(i).width(t.image.width).height(t.image.height).attr("style",e(t.image).attr("style")).attr("src",t.image.src)}})})}n.rescale(function(){y.addTimer("fullscreen_enter",function(){y.show(n.getActiveImage()),"function"==typeof t&&t.call(n)},100),n.trigger(v.FULLSCREEN_ENTER)}),e(i).resize(function(){g.scale()})},scale:function(){n.rescale()},exit:function(t){g.active=!1,y.hide(n.getActiveImage()),n.$("container").removeClass("fullscreen"),y.revertStyles(n.get("container"),u().html,u().body),i.scrollTo(0,g.scrolled),n.detachKeyboard(),n.attachKeyboard(g.keymap),n.rescale(function(){y.addTimer("fullscreen_exit",function(){y.show(n.getActiveImage()),"function"==typeof t&&t.call(n)},50),n.trigger(v.FULLSCREEN_EXIT)}),e(i).unbind("resize",g.scale)}},f=this._idle={trunk:[],bound:!1,add:function(t,i){if(t){f.bound||f.addEvent(),t=e(t);var n,o={};for(n in i)i.hasOwnProperty(n)&&(o[n]=t.css(n));t.data("idle",{from:o,to:i,complete:!0,busy:!1}),f.addTimer(),f.trunk.push(t)}},remove:function(t){t=jQuery(t),e.each(f.trunk,function(e,i){i.length&&!i.not(t).length&&(n._idle.show(t),n._idle.trunk.splice(e,1))}),f.trunk.length||(f.removeEvent(),y.clearTimer("idle"))},addEvent:function(){f.bound=!0,n.$("container").bind("mousemove click",f.showAll)},removeEvent:function(){f.bound=!1,n.$("container").unbind("mousemove click",f.showAll)},addTimer:function(){y.addTimer("idle",function(){n._idle.hide()},n._options.idleTime)},hide:function(){n.trigger(v.IDLE_ENTER),e.each(f.trunk,function(e,t){var i=t.data("idle");i&&(t.data("idle").complete=!1,t.stop().animate(i.to,{duration:n._options.idleSpeed,queue:!1,easing:"swing"}))})},showAll:function(){y.clearTimer("idle"),e.each(n._idle.trunk,function(e,t){n._idle.show(t)})},show:function(t){var i=t.data("idle");i.busy||i.complete||(i.busy=!0,n.trigger(v.IDLE_EXIT),y.clearTimer("idle"),t.stop().animate(i.from,{duration:n._options.idleSpeed/2,queue:!1,easing:"swing",complete:function(){e(this).data("idle").busy=!1,e(this).data("idle").complete=!0}})),f.addTimer()}},m=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},init:function(){if(n.trigger(v.LIGHTBOX_OPEN),!m.initialized){m.initialized=!0;var t="overlay box content shadow title info close prevholder prev nextholder next counter image",i={},o=n._options,a="",s="position:absolute;",r="lightbox-",c={overlay:"position:fixed;display:none;opacity:"+o.overlayOpacity+";filter:alpha(opacity="+100*o.overlayOpacity+");top:0;left:0;width:100%;height:100%;background:"+o.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:s+"background:#000;width:100%;height:100%;",content:s+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:s+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:s+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:s+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:s+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:s+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:s+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:s+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},d=function(t){return t.hover(function(){e(this).css("color","#bbb")},function(){e(this).css("color","#444")})},p={};8===h&&(c.nextholder+="background:#000;filter:alpha(opacity=0);",c.prevholder+="background:#000;filter:alpha(opacity=0);"),e.each(c,function(e,t){a+=".galleria-"+r+e+"{"+t+"}"}),y.insertStyleTag(a),e.each(t.split(" "),function(e,t){n.addElement("lightbox-"+t),i[t]=m.elems[t]=n.get("lightbox-"+t)}),m.image=new v.Picture,e.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(t,i){var n=[];e.each(i.split(" "),function(e,t){n.push(r+t)}),p[r+t]=n}),n.append(p),e(i.image).append(m.image.container),e(u().body).append(i.overlay,i.box),d(e(i.close).bind(l(),m.hide).html("&#215;")),e.each(["Prev","Next"],function(t,n){var o=e(i[n.toLowerCase()]).html(/v/.test(n)?"&#8249;&nbsp;":"&nbsp;&#8250;"),a=e(i[n.toLowerCase()+"holder"]);return a.bind(l(),function(){m["show"+n]()}),8>h?(o.show(),void 0):(a.hover(function(){o.show()},function(){o.stop().fadeOut(200)}),void 0)}),e(i.overlay).bind(l(),m.hide)}},rescale:function(t){var o=Math.min(e(i).width()-40,m.width),a=Math.min(e(i).height()-60,m.height),s=Math.min(o/m.width,a/m.height),r=m.width*s+40,l=m.height*s+60,h={width:r,height:l,marginTop:-1*Math.ceil(l/2),marginLeft:-1*Math.ceil(r/2)};t?e(m.elems.box).css(h):e(m.elems.box).animate(h,n._options.lightboxTransitionSpeed,n._options.easing,function(){var t=m.image,i=n._options.lightboxFadeSpeed;n.trigger({type:v.LIGHTBOX_IMAGE,imageTarget:t.image}),e(t.container).show(),y.show(t.image,i),y.show(m.elems.info,i)})},hide:function(){m.image.image=null,e(i).unbind("resize",m.rescale),e(m.elems.box).hide(),y.hide(m.elems.info),y.hide(m.elems.overlay,200,function(){e(this).hide().css("opacity",n._options.overlayOpacity),n.trigger(v.LIGHTBOX_CLOSE)})},showNext:function(){m.show(n.getNext(m.active))},showPrev:function(){m.show(n.getPrev(m.active))},show:function(t){m.active=t="number"==typeof t?t:n.getIndex(),m.initialized||m.init(),e(i).unbind("resize",m.rescale);var o=n.getData(t),a=n.getDataLength();y.hide(m.elems.info),m.image.load(o.image,function(n){m.width=n.original.width,m.height=n.original.height,e(n.image).css({width:"100.5%",height:"100.5%",top:0,zIndex:99998}),y.hide(n.image),m.elems.title.innerHTML=o.title,m.elems.counter.innerHTML=t+1+" / "+a,e(i).resize(m.rescale),m.rescale()}),e(m.elems.overlay).show(),e(m.elems.box).show()}};return this};v.prototype={constructor:v,init:function(i,n){var o=this;return n=p(n),m.push(this),this._original={target:i,options:n,data:null},this._target=this._dom.target=i.nodeName?i:e(i).get(0),this._target?(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dataConfig:function(){return{}},dataSelector:"img",dataSource:this._target,debug:t,easing:"galleria",extend:function(){},height:"auto",idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",keepSource:!1,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:400,linkSourceTmages:!0,maxScaleRatio:t,minScaleRatio:t,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,thumbCrop:!0,thumbEventType:l(),thumbFit:!0,thumbMargin:0,thumbQuality:"auto",thumbnails:!0,transition:"fade",transitionInitial:t,transitionSpeed:400,width:"auto"},n&&n.debug===!0&&(a=!0),e(this._target).children().hide(),"object"==typeof v.theme?this._init():y.wait({until:function(){return"object"==typeof v.theme},success:function(){o._init.call(o)},error:function(){v.raise("No theme found.",!0)},timeout:5e3}),void 0):(v.raise("Target not found."),void 0)},_init:function(){var n=this;if(this._initialized)return v.raise("Init failed: Gallery instance already initialized."),this;if(this._initialized=!0,!v.theme)return v.raise("Init failed: No theme found."),this;e.extend(!0,this._options,v.theme.defaults,this._original.options),this.bind(v.DATA,function(){this._original.data=this._data,this.get("total").innerHTML=this.getDataLength();var t=this.$("container"),o={width:0,height:0},a=y.create("galleria-image");y.wait({until:function(){e.each(["width","height"],function(e,i){o[i]=n._options[i]&&"number"==typeof n._options[i]?n._options[i]:Math.max(y.parseValue(t.css(i)),y.parseValue(n.$("target").css(i)),t[i](),n.$("target")[i]())});var i=function(){return!0};return n._options.thumbnails&&(n.$("thumbnails").append(a),i=function(){return!!e(a).height()}),i()&&o.width&&o.height>10},success:function(){e(a).remove(),t.width(o.width),t.height(o.height),v.WEBKIT?i.setTimeout(function(){n._run()},1):n._run()},error:function(){v.raise("Width & Height not found.",!0)},timeout:2e3})});var o=!1;return this.bind(v.READY,function(o){return function(){return y.show(this.get("counter")),this._options.carousel&&this._carousel.bindControls(),this._options.autoplay&&(this.pause(),"number"==typeof this._options.autoplay&&(this._playtime=this._options.autoplay),this.trigger(v.PLAY),this._playing=!0),o?("number"==typeof this._options.show&&this.show(this._options.show),void 0):(o=!0,this._options.clicknext&&(e.each(this._data,function(e,t){delete t.link}),this.$("stage").css({cursor:"pointer"}).bind(l(),function(){n._options.pauseOnInteraction&&n.pause(),n.next()})),v.History&&v.History.change(function(e){var o=parseInt(e.value.replace(/\//,""),10);isNaN(o)?i.history.go(-1):n.show(o,t,!0)}),v.theme.init.call(this,this._options),this._options.extend.call(this,this._options),/^[0-9]{1,4}$/.test(r)&&v.History?this.show(r,t,!0):this._data[this._options.show]&&this.show(this._options.show),void 0)}}(o)),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),y.hide(this.$("counter").append(this.get("current")," / ",this.get("total"))),this.setCounter("&#8211;"),y.hide(n.get("tooltip")),e.each(new Array(2),function(t){var i=new v.Picture;e(i.container).css({position:"absolute",top:0,left:0}),n.$("images").append(i.container),n._controls[t]=i}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").bind(l(),function(e){n._options.clicknext&&e.stopPropagation(),n._options.pauseOnInteraction&&n.pause();var t=/right/.test(this.className)?"next":"prev";n[t]()}),e.each(["info","counter","image-nav"],function(e,t){n._options["show"+t.substr(0,1).toUpperCase()+t.substr(1).replace(/-/,"")]===!1&&y.moveOut(n.get(t.toLowerCase()))}),this.load(),this._options.keep_source||h||(this._target.innerHTML=""),this.$("target").append(this.get("container")),this._options.carousel&&this.bind(v.THUMBNAIL,function(){this.updateCarousel()}),this},_createThumbnails:function(){this.get("total").innerHTML=this.getDataLength();var t,o,a,s,r,l=this,h=this._options,u=function(){var e=l.$("thumbnails").find(".active");return e.length?e.find("img").attr("src"):!1}(),c="string"==typeof h.thumbnails?h.thumbnails.toLowerCase():null,d=function(e){return n.defaultView&&n.defaultView.getComputedStyle?n.defaultView.getComputedStyle(a.container,null)[e]:r.css(e)},p=function(t,i,n){return function(){e(n).append(t),l.trigger({type:v.THUMBNAIL,thumbTarget:t,index:i})}},g=function(t){h.pauseOnInteraction&&l.pause();var i=e(t.currentTarget).data("index");l.getIndex()!==i&&l.show(i),t.preventDefault()},f=function(t){t.scale({width:t.data.width,height:t.data.height,crop:h.thumbCrop,margin:h.thumbMargin,complete:function(t){var i,n,o=["left","top"],a=["Width","Height"];e.each(a,function(a,s){i=s.toLowerCase(),h.thumbCrop===!0&&h.thumbCrop!==i||!h.thumbFit||(n={},n[i]=t[i],e(t.container).css(n),n={},n[o[a]]=0,e(t.image).css(n)),t["outer"+s]=e(t.container)["outer"+s](!0)}),y.toggleQuality(t.image,h.thumbQuality===!0||"auto"===h.thumbQuality&&t.original.width<3*t.width),l.trigger({type:v.THUMBNAIL,thumbTarget:t.image,index:t.data.order})}})};for(this._thumbnails=[],this.$("thumbnails").empty(),t=0;this._data[t];t++)s=this._data[t],h.thumbnails===!0?(a=new v.Picture(t),o=s.thumb||s.image,this.$("thumbnails").append(a.container),r=e(a.container),a.data={width:y.parseValue(d("width")),height:y.parseValue(d("height")),order:t},h.thumbFit&&h.thumbCrop!==!0?r.css({width:0,height:0}):r.css({width:a.data.width,height:a.data.height}),a.load(o,f),"all"===h.preload&&a.add(s.image)):"empty"===c||"numbers"===c?(a={container:y.create("galleria-image"),image:y.create("img","span"),ready:!0},"numbers"===c&&e(a.image).text(t+1),this.$("thumbnails").append(a.container),i.setTimeout(p(a.image,t,a.container),50+20*t)):a={container:null,image:null},e(a.container).add(h.keepSource&&h.linkSourceImages?s.original:null).data("index",t).bind(h.thumbEventType,g),u===o&&e(a.container).addClass("active"),this._thumbnails.push(a)},_run:function(){var e=this;e._createThumbnails(),y.wait({until:function(){return v.OPERA&&e.$("stage").css("display","inline-block"),e._stageWidth=e.$("stage").width(),e._stageHeight=e.$("stage").height(),e._stageWidth&&e._stageHeight>50},success:function(){e.trigger(v.READY)},error:function(){v.raise("Stage measures not found",!0)}})},load:function(t,i,n){var o=this;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),"function"==typeof i&&(n=i,i=null),t=t||this._options.dataSource,i=i||this._options.dataSelector,n=n||this._options.dataConfig,t.constructor===Array?(this.validate(t)?(this._data=t,this._parseData().trigger(v.DATA)):v.raise("Load failed: JSON Array not valid."),this):(e(t).find(i).each(function(t,i){i=e(i);var a={},s=i.parent(),r=s.attr("href");a.image=a.big=r,o._data.push(e.extend({title:i.attr("title"),thumb:i.attr("src"),image:i.attr("src"),big:i.attr("src"),description:i.attr("alt"),link:i.attr("longdesc"),original:i.get(0)},a,n(i)))}),this.getDataLength()?this.trigger(v.DATA):v.raise("Load failed: no data found."),this)},_parseData:function(){var t=this;return e.each(this._data,function(e,i){"thumb"in i==!1&&(t._data[e].thumb=i.image),!1 in i&&(t._data[e].big=i.image)}),this},splice:function(){return Array.prototype.splice.apply(this._data,y.array(arguments)),this._parseData()._createThumbnails()},push:function(){return Array.prototype.push.apply(this._data,y.array(arguments)),this._parseData()._createThumbnails()},_getActive:function(){return this._controls.getActive()},validate:function(){return!0},bind:function(e,t){return e=g(e),this.$("container").bind(e,this.proxy(t)),this},unbind:function(e){return e=g(e),this.$("container").unbind(e),this},trigger:function(t){return t="object"==typeof t?e.extend(t,{scope:this}):{type:g(t),scope:this},this.$("container").trigger(t),this},addIdleState:function(){return this._idle.add.apply(this._idle,y.array(arguments)),this},removeIdleState:function(){return this._idle.remove.apply(this._idle,y.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(){return this._fullscreen.enter.apply(this,y.array(arguments)),this},exitFullscreen:function(){return this._fullscreen.exit.apply(this,y.array(arguments)),this},toggleFullscreen:function(){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,y.array(arguments)),this},bindTooltip:function(){return this._tooltip.bind.apply(this._tooltip,y.array(arguments)),this},defineTooltip:function(){return this._tooltip.define.apply(this._tooltip,y.array(arguments)),this},refreshTooltip:function(){return this._tooltip.show.apply(this._tooltip,y.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,y.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,y.array(arguments)),this},getActiveImage:function(){return this._getActive().image||t},getActiveThumb:function(){return this._thumbnails[this._active].image||t},getMousePosition:function(e){return{x:e.pageX-this.$("container").offset().left,y:e.pageY-this.$("container").offset().top}},addPan:function(t){if(this._options.imageCrop!==!1){t=e(t||this.getActiveImage());var i=this,n=t.width()/2,o=t.height()/2,a=parseInt(t.css("left"),10),s=parseInt(t.css("top"),10),r=a||0,l=s||0,u=0,c=0,d=!1,p=y.timestamp(),g=0,f=0,m=function(e,i,n){if(e>0&&(f=Math.round(Math.max(-1*e,Math.min(0,i))),g!==f))if(g=f,8===h)t.parent()["scroll"+n](-1*f);else{var o={};o[n.toLowerCase()]=f,t.css(o)}},_=function(e){y.timestamp()-p<50||(d=!0,n=i.getMousePosition(e).x,o=i.getMousePosition(e).y)},v=function(){d&&(u=t.width()-i._stageWidth,c=t.height()-i._stageHeight,a=n/i._stageWidth*u*-1,s=o/i._stageHeight*c*-1,r+=(a-r)/i._options.imagePanSmoothness,l+=(s-l)/i._options.imagePanSmoothness,m(c,l,"Top"),m(u,r,"Left"))};return 8===h&&(t.parent().scrollTop(-1*l).scrollLeft(-1*r),t.css({top:0,left:0})),this.$("stage").unbind("mousemove",_).bind("mousemove",_),y.addTimer("pan",v,50,!0),this}},proxy:function(e,t){return"function"!=typeof e?function(){}:(t=t||this,function(){return e.apply(t,y.array(arguments))})},removePan:function(){return this.$("stage").unbind("mousemove"),y.clearTimer("pan"),this},addElement:function(){var t=this._dom;return e.each(y.array(arguments),function(e,i){t[i]=y.create("galleria-"+i)}),this},attachKeyboard:function(){return this._keyboard.attach.apply(this._keyboard,y.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,y.array(arguments)),this},appendChild:function(e,t){return this.$(e).append(this.get(t)||t),this},prependChild:function(e,t){return this.$(e).prepend(this.get(t)||t),this},remove:function(){return this.$(y.array(arguments).join(",")).remove(),this},append:function(e){var t,i;for(t in e)if(e.hasOwnProperty(t))if(e[t].constructor===Array)for(i=0;e[t][i];i++)this.appendChild(t,e[t][i]);else this.appendChild(t,e[t]);return this},_scaleImage:function(t,i){return i=e.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition},i),(t||this._controls.getActive()).scale(i),this},updateCarousel:function(){return this._carousel.update(),this},rescale:function(e,i,n){var o=this;"function"==typeof e&&(n=e,e=t);var a=function(){o._stageWidth=e||o.$("stage").width(),o._stageHeight=i||o.$("stage").height(),o._scaleImage(),o._options.carousel&&o.updateCarousel(),o.trigger(v.RESCALE),"function"==typeof n&&n.call(o)};return!v.WEBKIT||e||i?a.call(o):y.addTimer("scale",a,5),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},show:function(e,t,i){return e===!1||!this._options.queue&&this._queue.stalled?void 0:(e=Math.max(0,Math.min(parseInt(e,10),this.getDataLength()-1)),t="undefined"!=typeof t?!!t:e<this.getIndex(),i=i||!1,!i&&v.History?(v.History.value(e.toString()),void 0):(this._active=e,Array.prototype.push.call(this._queue,{index:e,rewind:t}),this._queue.stalled||this._show(),this))},_show:function(){var t=this,n=this._queue[0],o=this.getData(n.index);if(o){var a=this.isFullscreen()&&"big"in o?o.big:o.image,s=this._controls.getActive(),r=this._controls.getNext(),h=r.isCached(a),u=this._thumbnails[n.index],c=function(){var a;t._queue.stalled=!1,y.toggleQuality(r.image,t._options.imageQuality),e(s.container).css({zIndex:0,opacity:0}),e(r.container).css({zIndex:1,opacity:1}),t._controls.swap(),t._options.imagePan&&t.addPan(r.image),(o.link||t._options.lightbox)&&e(r.image).css({cursor:"pointer"}).bind(l(),function(){return o.link?(t._options.popupLinks?a=i.open(o.link,"_blank"):i.location.href=o.link,void 0):(t.openLightbox(),void 0)}),Array.prototype.shift.call(t._queue),t._queue.length&&t._show(),t._playCheck(),t.trigger({type:v.IMAGE,index:n.index,imageTarget:r.image,thumbTarget:u.image})};if(this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(n.index),this._options.preload){var d,p,o,g=this.getNext();try{for(p=this._options.preload;p>0;p--)d=new v.Picture,o=t.getData(g),d.add(this.isFullscreen()&&"big"in o?o.big:o.image),g=t.getNext(g)}catch(f){}}y.show(r.container),e(t._thumbnails[n.index].container).addClass("active").siblings(".active").removeClass("active"),t.trigger({type:v.LOADSTART,cached:h,index:n.index,imageTarget:r.image,thumbTarget:u.image}),r.load(a,function(e){t._scaleImage(e,{complete:function(e){y.show(e.container),"image"in s&&y.toggleQuality(s.image,!1),y.toggleQuality(e.image,!1),t._queue.stalled=!0,t.removePan(),t.setInfo(n.index),t.setCounter(n.index),t.trigger({type:v.LOADFINISH,cached:h,index:n.index,imageTarget:e.image,thumbTarget:t._thumbnails[n.index].image});var i=null===s.image&&t._options.transitionInitial?t._options.transitionInitial:t._options.transition;if(i in _==!1)c();else{var o={prev:s.image,next:e.image,rewind:n.rewind,speed:t._options.transitionSpeed||400};_[i].call(t,o,c)}}})})}},getNext:function(e){return e="number"==typeof e?e:this.getIndex(),e===this.getDataLength()-1?0:e+1},getPrev:function(e){return e="number"==typeof e?e:this.getIndex(),0===e?this.getDataLength()-1:e-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(e){return e in this._dom?this._dom[e]:null},getData:function(e){return e in this._data?this._data[e]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return"number"==typeof this._active?this._active:!1},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(e){return"undefined"==typeof e?this._options:this._options[e]},setOptions:function(t,i){return"object"==typeof t?e.extend(this._options,t):this._options[t]=i,this},play:function(e){return this._playing=!0,this._playtime=e||this._playtime,this._playCheck(),this.trigger(v.PLAY),this},pause:function(){return this._playing=!1,this.trigger(v.PAUSE),this},playToggle:function(e){return this._playing?this.pause():this.play(e)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var e=this,t=0,i=20,n=y.timestamp(),o="play"+this._id;if(this._playing){y.clearTimer(o);var a=function(){return t=y.timestamp()-n,t>=e._playtime&&e._playing?(y.clearTimer(o),e.next(),void 0):(e._playing&&(e.trigger({type:v.PROGRESS,percent:Math.ceil(t/e._playtime*100),seconds:Math.floor(t/1e3),milliseconds:t}),y.addTimer(o,a,i)),void 0)};y.addTimer(o,a,i)}},setIndex:function(e){return this._active=e,this},setCounter:function(e){if("number"==typeof e?e++:"undefined"==typeof e&&(e=this.getIndex()+1),this.get("current").innerHTML=e,h){var t=this.$("counter"),i=t.css("opacity"),n=t.attr("style");n&&1===parseInt(i,10)?t.attr("style",n.replace(/filter[^\;]+\;/i,"")):this.$("counter").css("opacity",i)}return this},setInfo:function(t){var i=this,n=this.getData(t);return e.each(["title","description"],function(e,t){var o=i.$("info-"+t);n[t]?o[n[t].length?"show":"hide"]().html(n[t]):o.empty().hide()}),this},hasInfo:function(e){var t,i="title description".split(" ");for(t=0;i[t];t++)if(this.getData(e)[i[t]])return!0;return!1},jQuery:function(t){var i=this,n=[];e.each(t.split(","),function(t,o){o=e.trim(o),i.get(o)&&n.push(o)});var o=e(i.get(n.shift()));return e.each(n,function(e,t){o=o.add(i.get(t))}),o},$:function(){return this.jQuery.apply(this,y.array(arguments))}},e.each(d,function(e,t){var i=/_/.test(t)?t.replace(/_/g,""):t;v[t.toUpperCase()]="galleria."+i}),e.extend(v,{IE9:9===h,IE8:8===h,IE7:7===h,IE6:6===h,IE:!!h,WEBKIT:/webkit/.test(s),SAFARI:/safari/.test(s),CHROME:/chrome/.test(s),QUIRK:h&&n.compatMode&&"BackCompat"===n.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!i.opera,IPHONE:/iphone/.test(s),IPAD:/ipad/.test(s),ANDROID:/android/.test(s),TOUCH:!!(/iphone/.test(s)||/ipad/.test(s)||/android/.test(s))}),v.addTheme=function(t,i){t.name||v.raise("No theme name specified"),t.defaults="object"!=typeof t.defaults?{}:p(t.defaults);var n,o=!1;return"string"==typeof t.css?(e("link").each(function(e,i){return n=new RegExp(t.css),n.test(i.href)?(o=!0,v.theme=t,!1):void 0}),o||e("script").each(function(e,i){n=new RegExp("galleria\\."+t.name.toLowerCase()+"\\."),n.test(i.src)&&(o=i.src.replace(/[^\/]*$/,"")+t.css,y.addTimer("css",function(){y.loadCSS(o,"galleria-theme",function(){v.theme=t})},1))}),o||(i?v.raise("No theme CSS loaded"):v.theme=t)):v.theme=t,t},v.loadTheme=function(i,n){var o=!1,a=m.length;v.theme=t,y.loadScript(i,function(){o=!0}),y.wait({until:function(){return o},error:function(){v.raise("Theme at "+i+" could not load, check theme path.",!0)},success:function(){if(a){var t=[];e.each(v.get(),function(i,o){var a=e.extend(o._original.options,{data_source:o._data},n);o.$("container").remove();var s=new v;s._id=o._id,s.init(o._original.target,a),t.push(s)}),m=t}},timeout:2e3})},v.get=function(e){return m[e]?m[e]:"number"!=typeof e?m:(v.raise("Gallery index "+e+" not found"),void 0)},v.addTransition=function(e,t){_[e]=t},v.utils=y,v.log=function(){try{i.console.log.apply(i.console,y.array(arguments))}catch(e){try{i.opera.postError.apply(i.opera,arguments)}catch(t){i.alert(y.array(arguments).split(", "))}}},v.raise=function(e,t){if(a||t){var i=t?"Fatal error":"Error";throw new Error(i+": "+e)}},v.Picture=function(t){this.id=t||null,this.image=null,this.container=y.create("galleria-image"),e(this.container).css({overflow:"hidden",position:"relative"}),this.original={width:0,height:0},this.ready=!1,this.loaded=!1},v.Picture.prototype={cache:{},add:function(t){var i=0,n=this,o=new Image,a=function(){e(o).load(s).attr("src",base_url+"images/no_image.jpg")},s=function(){newSrc=e(this).attr("src"),this.width&&this.height||!(1e3>i)||(i++,e(o).load(s).attr("src",newSrc+"?"+(new Date).getTime())),n.original={height:428,width:639},n.cache[t]=newSrc,n.loaded=!0};return e(o).css("display","block"),n.cache[t]?(o.src=n.cache[t],s.call(o),o):(e(o).load(s).error(a).attr("src",t),o)},show:function(){y.show(this.image)},hide:function(){y.moveOut(this.image)},clear:function(){this.image=null},isCached:function(e){return!!this.cache[e]},load:function(t,n){var o=this;return e(this.container).empty(!0),this.image=this.add(t),y.hide(this.image),e(this.container).append(this.image),y.wait({until:function(){return o.loaded&&o.image.complete&&o.original.width&&o.image.width},success:function(){i.setTimeout(function(){n.call(o,o)},50)},error:function(){i.setTimeout(function(){n.call(o,o)},50),v.raise("image not loaded in 30 seconds: "+t)},timeout:3e4}),this.container},scale:function(i){if(i=e.extend({width:0,height:0,min:t,max:t,margin:0,complete:function(){},position:"center",crop:!1},i),!this.image)return this.container;var n,o,a=this,s=e(a.container);return y.wait({until:function(){return n=i.width||s.width()||y.parseValue(s.css("width")),o=i.height||s.height()||y.parseValue(s.css("height")),n&&o},success:function(){var t=(n-2*i.margin)/a.original.width,s=(o-2*i.margin)/a.original.height,r={"true":Math.max(t,s),width:t,height:s,"false":Math.min(t,s)},l=r[i.crop.toString()];i.max&&(l=Math.min(i.max,l)),i.min&&(l=Math.max(i.min,l)),e(a.container).width(n).height(o),e.each(["width","height"],function(t,i){e(a.image)[i](a.image[i]=a[i]=Math.round(a.original[i]*l))});var h={},u={},c=function(t,i,n){var o=0;if(/\%/.test(t)){var s=parseInt(t,10)/100,r=a.image[i]||e(a.image)[i]();o=Math.ceil(-1*r*s+n*s)}else o=y.parseValue(t);return o},d={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};e.each(i.position.toLowerCase().split(" "),function(e,t){"center"===t&&(t="50%"),h[e?"top":"left"]=t}),e.each(h,function(t,i){d.hasOwnProperty(i)&&e.extend(u,d[i])}),h=h.top?e.extend(h,u):u,h=e.extend({top:"50%",left:"50%"},h),e(a.image).css({position:"relative",top:c(h.top,"height",o),left:c(h.left,"width",n)}),a.show(),a.ready=!0,i.complete.call(a,a)},error:function(){v.raise("Could not scale image: "+a.image.src)},timeout:1e3}),this}},e.extend(e.easing,{galleria:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t*t*t+i:-n/2*((t-=2)*t*t*t-2)+i},galleriaIn:function(e,t,i,n,o){return n*(t/=o)*t*t*t+i},galleriaOut:function(e,t,i,n,o){return-n*((t=t/o-1)*t*t*t-1)+i}}),e.fn.galleria=function(e){return this.each(function(){var t=new v;t.init(this,e)})},i.Galleria=v}(jQuery),function(e){Galleria.addTheme({name:"classic",author:"Galleria",css:"galleria.classic.css",defaults:{transition:"slide",thumbCrop:"height",_toggleInfo:!1},init:function(t){this.addElement("info-link","info-close"),this.append({info:["info-link","info-close"]});var i=this.$("info-link,info-close,info-text"),n=Galleria.TOUCH,o=n?"touchstart":"click";this.$("loader,counter").show().css("opacity",.4),n||this.addIdleState(this.get("counter"),{opacity:0}),t._toggleInfo===!0?i.bind(o,function(){i.toggle()}):(i.show(),this.$("info-link, info-close").hide()),this.bind("thumbnail",function(i){n||(e(i.thumbTarget).css("opacity",.6).parent().hover(function(){e(this).not(".active").children().stop().fadeTo(100,1)},function(){e(this).not(".active").children().stop().fadeTo(400,.6)}),i.index===t.show&&e(i.thumbTarget).css("opacity",1))}),this.bind("loadstart",function(t){t.cached||this.$("loader").show().fadeTo(200,.4),this.$("info").toggle(this.hasInfo()),e(t.thumbTarget).css("opacity",1).parent().siblings().children().css("opacity",.6)
}),this.bind("loadfinish",function(){this.$("loader").fadeOut(200)})}})}(jQuery),function(e){var t=function(e,t){e&&this.init(e,t)};e.extend(t.prototype,{name:"cogzidelMap",init:function(t,i){this.element=e(t),e.data(t,this.name,this);var n=this;if(i.position&&(this.position=i.position),i.isFuzzy&&(this.isFuzzy=i.isFuzzy),i.onMarkerClick&&(this.onMarkerClick=i.onMarkerClick),i.accuracy&&(this.accuracy=i.accuracy),this.isFuzzy){var o=11;o=this.accuracy>=3&&this.accuracy<=9?this.accuracy+6:2==this.accuracy?6:1==this.accuracy?4:1,this.map=new google.maps.Map(t,{zoom:o,center:this.position,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,scrollwheel:!1}),this.marker=new google.maps.Circle({center:this.position,map:this.map,fillColor:"rgb(255, 0, 162)",fillOpacity:.25,radius:CogzidelConstants.MapCircleSizes[o],strokeOpacity:0,clickable:!1});var a=function(){var e=n.marker.getBounds(),t=n.map.getBounds();e.contains&&e.contains(t.getNorthEast())&&e.contains(t.getSouthWest())?n.markerHidden||(n.marker.setOptions({fillOpacity:0}),n.markerHidden=!0):n.markerHidden&&(n.marker.setOptions({fillOpacity:.25}),n.markerHidden=!1)},s=function(){n.marker.setRadius(CogzidelConstants.MapCircleSizes[n.map.getZoom()])};google.maps.event.addListener(n.map,"bounds_changed",a),google.maps.event.addListener(n.map,"zoom_changed",s)}else this.map=new google.maps.Map(t,{zoom:15,center:this.position,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,scrollwheel:!1,scaleControl:!0}),this.marker=new google.maps.Marker({clickable:!!this.onMarkerClick,position:this.position,map:this.map,zIndex:10,icon:new google.maps.MarkerImage("/images/guidebook/pin_home.png",null,null,new google.maps.Point(14,32))});this.onMarkerClick&&google.maps.event.addListener(this.marker,"click",function(){n.onMarkerClick(n)})},setMarkerPosition:function(e){this.isFuzzy?this.marker.setCenter(e):this.marker.setPosition(e),this.map.panTo(e)},position:null,isFuzzy:!1,map:null,marker:null,onMarkerClick:null,accuracy:9,minZoom:1,markerHidden:!1}),e.fn.cogzidelMap=function(i){var n,o=e.makeArray(arguments),a=o.slice(1),s=this.each(function(){n=e.data(this,"cogzidelMap"),n?"string"==typeof i?n[i].apply(n,a):n.update&&n.update.apply(n,o):new t(this,i)});return n?n:s}}(jQuery),!window.CogzidelConstants)var CogzidelConstants={};CogzidelConstants.MapCircleSizes=[4096e3,2048e3,1024e3,512e3,256e3,128e3,64e3,32e3,16e3,8e3,4e3,2e3,1e3,500,500,500,500,500,500,500],this.tooltip=function(){xOffset=20,yOffset=20,jQuery("a.tooltip").hover(function(e){this.t=this.title,this.title="",jQuery("body").append("<p id='tooltip'>"+this.t.replace(/\n/g,"<br />")+"</p>"),jQuery("#tooltip").css("top",e.pageY-xOffset+"px").css("left",e.pageX+yOffset+"px").fadeIn("fast")},function(){this.title=this.t,jQuery("#tooltip").remove()}),jQuery("a.tooltip").mousemove(function(e){jQuery("#tooltip").css("top",e.pageY-xOffset+"px").css("left",e.pageX+yOffset+"px")})},jQuery(document).ready(function(){tooltip()}),function(e){SimpleStateMachine=function(e,t){var i=this;i.init(e,t)},SimpleStateMachine.prototype.currentState=0,e.extend(SimpleStateMachine.prototype,{States:{Init:0},options:{},init:function(t,i){var n=this;e.extend(n.States,t),e.extend(n.options,i),n.transitions={},n.currentState=n.States.Init,e.each(n.States,function(t,i){e.each(n.States,function(e,t){n.transitions[i+"_"+t]=[]}),n.transitions["_"+i.toString()]=[],n.transitions[i.toString()+"_"]=[]})},addTransitionHandler:function(e,t){var i=this,n="";if("object"==typeof e){var o=null==e.from?"":e.from,a=null==e.to?"":e.to;n=o+"_"+a}else"number"==typeof e&&(n="_"+e.toString());i.transitions[n].push(t)},transitionTo:function(t){for(var i=this,n=function(e,t){t.call(i.options.context||null)},o=[i.currentState.toString()+"_",i.currentState.toString()+"_"+t.toString(),"_"+t.toString()],a=0,s=o.length;s>a;a++)e.each(i.transitions[o[a]],n);i.currentState=t}})}(jQuery),function(e,t){var i=e.VerificationFlow=function(e){this.options=t.extend({element:null,showIntro:!1,onComplete:function(){}},e),this.init()};i.prototype={states:{basic_profile:0,profile_photo:1,phone_verification:2,real_name:3},steps:[],statesFlipped:{},numStates:0,currentState:0,init:function(){var e=this;if(this.element=t(this.options.element),this.$continue=this.$(".button-bar a.continue"),this.steps=[],this.$(".verification-flow-panel").each(function(){e.steps.push(t(this).data("step"))}),0!==this.element.length&&0!==this.steps.length){t.each(this.states,function(t,i){e.statesFlipped[i]=t,e.numStates++}),this.sm=new SimpleStateMachine(this.states,{context:this}),t.each(this.transitionHandlers,function(t,i){var n=e.states[t];e.sm.addTransitionHandler(n,i)});for(var i=this.currentState;i<this.numStates&&!this.$panel(this.statesFlipped[this.currentState]).length;i++)this.currentState++;if(this.currentState===this.numStates)return this.finish(),void 0;if(this.sm.transitionTo(this.currentState),this.$continue.click(function(){e.nextState()}),this.initRealName(),this.options.showIntro){var n=this.$(".verification-flow-intro").show(),o=this.$(".verification-flow-panels").hide();this.$("a.start").click(function(){n.hide(),o.show(),e.start()}),e.trackEvent("show_intro",{numSteps:e.steps.length,steps:e.steps})}else e.start();this.steps.length>1?this.$(".verification-flow-step span:eq(1)").text(this.steps.length):this.$(".verification-flow-step").hide()}},start:function(){var e=this;this.trackEvent("start",{numSteps:e.steps.length,steps:e.steps}),this.updateStep()},transitionHandlers:{basic_profile:function(){this.$(".verification-flow-panel").hide(),this.$panel("basic_profile").show()},phone_verification:function(){var e=this;this.$(".verification-flow-panel").hide(),this.$panel("phone_verification").show(),t.phoneNumberWidget({showAddNumberInitially:!0,onVerifyComplete:function(){return e.hasVerifiedPhoneNumber=!0,e.nextState(),!1}})},profile_photo:function(){this.$(".verification-flow-panel").hide(),this.$panel("profile_photo").show()},real_name:function(){this.$(".verification-flow-panel").hide(),this.$panel("real_name").show(),this.$continue.hide()}},submitHandlers:{basic_profile:function(e){if(""===t.trim(t("#user_profile_info_about").val()))this.showError("You need to enter a profile description!");else{var i=this.$panel("basic_profile").find("textarea"),n={};n[i.attr("name")]=i.val(),t.post(i.attr("data-url"),n),e.call(this)}},phone_verification:function(e){this.hasVerifiedPhoneNumber?e.call(this):this.showError("You need to verify your phone number before continuing.")},profile_photo:function(e){var i=this;i.setLoading(!0),t.getJSON("/users/has_profile_pic",function(t){i.setLoading(!1),t.has_profile_pic?e.call(i):i.showError("You need to add a profile photo before continuing.")})},real_name:function(e){this.hasCompletedRealName?e.call(this):this.showError("You need to confirm your real name before continuing.")}},showError:function(e){alert(e)},setLoading:function(e){e?(this.element.addClass("loading"),this.$continue.attr("disabled","disabled")):(this.element.removeClass("loading"),this.$continue.removeAttr("disabled"))},nextState:function(){function e(){this.trackEvent("step_completed."+n),t===i.numStates?i.finish():(i.currentState=t,i.sm.transitionTo(i.currentState),i.updateStep())}for(var t,i=this,n=this.statesFlipped[this.currentState],o=this.submitHandlers[n],a=this.currentState;a<this.numStates&&(t=a+1,!this.$panel(this.statesFlipped[t]).length);a++);this.$panel(n).length?o.call(this,e):e()},updateStep:function(){var e=this.$(".verification-flow-panel:visible"),t=-1===e.index()?1:e.index()+1,n=this.statesFlipped[this.currentState];this.$(".verification-flow-step span:first").text(t),t===this.$(".verification-flow-panel").length&&this.$continue.text(i.translations.finish),this.trackEvent("step_start."+n)},$:function(e){return this.element.find(e)},$panel:function(e){return this.$(".verification-flow-panel."+e)},finish:function(){this.element.addClass("complete"),this.options.showIntro&&(this.$(".verification-flow-panels").hide(),this.$(".verification-flow-complete").show()),this.options.onComplete.call(this),this.trackEvent("completed")},initRealName:function(){var n,o=this,a=this.$panel("real_name");a.length&&(a.addClass("loading"),this.realNameFlow=new e.RealNameFlow({form:!1,container:a,onLoad:function(){a.removeClass("loading"),n=t("#real_name_flow .form_submit .button-glossy.submit").removeClass("green").addClass("blue"),o.steps.length>1&&n.text(i.translations.finish),"real_name"===o.statesFlipped[o.currentState]&&o.$continue.hide()},onSuccess:function(){o.hasCompletedRealName=!0,o.nextState()}}))},trackEvent:function(e,t){var i="verification_flow.";Mixpanel.track(i+e,t)}},i.translations={finish:"Finish"},i.addTranslations=function(e){t.extend(i.translations,e)},t.fn.verificationFlow=function(i){i=t.extend({},i||{},{element:this});var n=new e.VerificationFlow(i);t(this).data("verificationFlow",n)}}(Cogzidel,jQuery,void 0);