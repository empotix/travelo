function clean_up_and_submit_search_request(){return CogzidelSearch.loadNewResults(),!1}function display_search_type(e,r){var a,i;$("#map_message").hide(),r="undefined"==typeof r?!0:r;var o=CogzidelSearch.currentViewType;if(o===e.replace("search_type_",""))return!1;if($(".search_type_option").removeClass("search_type_option_active"),$("#"+e).addClass("search_type_option_active"),CogzidelSearch.changing_display_type=!0,"search_type_photo"===e)return SS.initOnce(),CogzidelSearch.currentViewType="photo",$("#Search_Main").removeClass("list_view map_view").addClass("photo_view"),i="small",CogzidelSearch.loadNewResults(),$("#search_filters_wrapper").appendTo("#Search_Main"),$("#map_wrapper").prependTo("#search_filters"),$("#map_options").prependTo("#search_filters"),!1;if("search_type_list"===e)return CogzidelSearch.currentViewType="list",$("#Search_Main").removeClass("map_view photo_view").addClass("list_view"),i="x_small",CogzidelSearch.loadNewResults(),$("#search_filters_wrapper").appendTo("#Search_Main"),$("#map_wrapper").prependTo("#search_filters"),$("#map_options").prependTo("#search_filters"),!1;if("search_type_map"===e){SS.initOnce(),CogzidelSearch.currentViewType="map",CogzidelSearch.hideBannerForRemainderOfSession=!0;var t=AMM.map.getCenter(),n=AMM.map.getZoom();13>n&&(n+=2),CogzidelSearch.loadNewResults(),$("#cc_attribution_link").addClass("force_hide"),$("#Search_Main").removeClass("list_view photo_view").addClass("map_view condensed_header_view"),google.maps.event.addListenerOnce(AMM.map,"resize",function(){AMM.map.setCenter(t),AMM.map.setZoom(n)}),google.maps.event.trigger(AMM.map,"resize"),jQuery("#results_filters").insertAfter("#standby_action_area"),jQuery("#results_save").insertAfter("#applied_filters"),jQuery("#map_wrapper").appendTo("#Search_Main"),jQuery("#map_options").prependTo("#search_filters"),jQuery("#map_wrapper").append(jQuery("#search_filters_wrapper")).append(jQuery("#search_filters_toggle")),AMM.clearOverlays(),jQuery.each(CogzidelSearch.resultsJson.properties,function(e,r){AMM.queue.push(r.id)}),AMM.showOverlays()}if("search_type_list"===e||"search_type_photo"===e){r&&(AMM.closeInfoWindow(),a=CogzidelSearch.thumbnailStyles[i],$(".search_thumbnail").each(function(e,r){r.src=r.src,r.height=a[0],r.width=a[1]}));var s=AMM.map.getCenter(),l=AMM.map.getZoom();l>10&&(l-=2),google.maps.event.addListenerOnce(AMM.map,"resize",function(){AMM.map.setCenter(s),AMM.map.setZoom(l)}),"map"===o&&(google.maps.event.trigger(AMM.map,"resize"),$("#results_filters").insertAfter("#results_header"),$("#results_save").appendTo("#results_header"),r&&!redoSearchInMapIsChecked()&&CogzidelSearch.loadNewResults()),$("#search_filters_wrapper").appendTo("#Search_Main"),$("#map_wrapper").prependTo("#search_filters"),$("#map_options").prependTo("#search_filters")}return("map"===o&&("list"===e||"photo"===e)||"map"!==o&&"map"!==e)&&CogzidelSearch.loadNewResultsWithNoResponse(),"map"===o?($("#map_message").width(507),$("#search_filters_toggle").addClass("search_filters_toggle_off").removeClass("search_filters_toggle_on"),$("#search_filters").show()):$("#search_filters").is(":visible")?$("#search_filters_toggle").addClass("search_filters_toggle_on").removeClass("search_filters_toggle_off"):$("#search_filters_toggle").addClass("search_filters_toggle_off").removeClass("search_filters_toggle_on"),CogzidelSearch.$.trigger("finishedrendering"),CogzidelSearch.changing_display_type=!1,!1}function reset_params_to_defaults(){CogzidelSearch.newSearch=!0,CogzidelSearch.locationHasChanged=!1,CogzidelSearch.results_changed_by_map_action=!1,$("#page").val("1")}function redoSearchInMapIsChecked(){return $("#redo_search_in_map").is(":checked")}function showLoadingOverlays(){clearTimeout(CogzidelSearch.loadingMessageTimeout),CogzidelSearch.loadingMessageTimeout=setTimeout(function(){window.google&&window.google.maps&&$("#small_map_loading").show(),$("#list_view_loading, #map_view_loading").show()},250)}function hideLoadingOverlays(){clearTimeout(CogzidelSearch.loadingMessageTimeout),$("#results_header, #results_filters, #results, #results_footer").removeClass("search_grayed"),$("#small_map_loading, #list_view_loading, #map_view_loading").hide()}function clearResultsList(){$("#results").empty()}function setBannerImage(e){if(void 0===e.url)$("#Search_Main").addClass("condensed_header_view");else{var r=new Image;r.src=e.url,r.complete?(bannerImageLoadComplete(e),r.onload=function(){}):r.onload=function(){bannerImageLoadComplete(e),r.onload=function(){}}}setAirtvVideo(e)}function setAirtvVideo(e){if($("#airtv_promo").remove(),void 0!==e.airtv_url&&CogzidelSearch.resultsJson.show_airtv_in_search_results&&"true"===CogzidelSearch.resultsJson.show_airtv_in_search_results){var r={};r.airtv_url=e.airtv_url,r.airtv_headline=e.airtv_headline||"Check Out AirTV!",r.airtv_description=e.airtv_description||"A video from nearby!",$("#results").before($("#list_view_airtv_template").jqote(r,"*")),initAirtvSearchVideoLightBox("#airtv_promo",e.airtv_url,e.airtv_headline)}}function initAirtvSearchVideoLightBox(e,r,a){0===jQuery("#video_lightbox_content").length&&jQuery("body").append('<div id="video_lightbox_content"></div>'),jQuery(e).colorbox({inline:!0,href:"#video_lightbox_content",onLoad:function(){var e=['<object id="video" width="764" height="458"><param name="movie" value="',r,'"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="',r,'" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="764" height="458"></embed></object>'].join("");jQuery("#video_lightbox_content").html(e)},onComplete:function(){jQuery("#cboxTitle").html(a)},onCleanup:function(){jQuery("#video_lightbox_content").html(""),jQuery("#cboxTitle").html("")}})}function bannerImageLoadComplete(e){jQuery("#search_header").css("background-image",["url(",e.url,")"].join("")),e.height?jQuery("#search_header").css("height",e.height):jQuery("#search_header").css("height",150),jQuery("#Search_Main").removeClass("condensed_header_view");var r=e.attribution_text||"CC licensed photo from Flickr",a=e.attribution_url||"http://www.flickr.com";jQuery("#cc_attribution_link").html(r).attr("href",a).show(),CogzidelSearch.$.trigger("finishedrendering")}function render_results_oncomplete(e){e.banner_info&&CogzidelSearch.hideBannerForRemainderOfSession===!1?setBannerImage(e.banner_info):jQuery("#cc_attribution_link").hide(),e.banner_info&&e.banner_info.airtv_url||Connections.init(),AMM.centerLat=!1,AMM.centerLng=!1,AMM.geocodePrecision=!1,e.center_lat&&e.center_lng&&(AMM.centerLat=e.center_lat,AMM.centerLng=e.center_lng,e.geocode_precision&&(AMM.geocodePrecision=e.geocode_precision)),AMM.drawCenterMarker(),reset_params_to_defaults(),setTimeout(function(){AMM.turnMapListenersOn()},1e3),CogzidelSearch.markViewedPageLinks(),CogzidelSearch.trackSearch(),CogzidelSearch.activeAjaxRequest=null,CogzidelSearch.initialLoadComplete=!0,CogzidelSearch.$.trigger("finishedrendering")}function render_results(e,r){function a(e,r,a){return c.jqote({badge_type:e,badge_text:r,badge_name:a},"*")}var i,o,t,n,s,l,c,d,h=!1;return AMM.turnMapListenersOff(),clearResultsList(),i=window.google&&window.google.maps&&(1==arguments.length||void 0===r.ea)?new google.maps.LatLngBounds:r,$(".results_count").html(e.results_count_html),$("#results_count_top").html(e.results_count_top_html),$("#results_pagination").html(e.results_pagination_html),$("#sort").val(e.sort),AMM.clearQueue(),t=!1,CogzidelSearch.forcedViewType===!1||CogzidelSearch.initialLoadComplete!==!1&&CogzidelSearch.searchHasBeenModified()!==!1?e.view_type&&(t=e.view_type):t=CogzidelSearch.forcedViewType,t!==!1&&(display_search_type("search_type_"+CogzidelSearch.viewTypes[t],!1),CogzidelSearch.currentViewType=CogzidelSearch.viewTypes[t],CogzidelSearch.params.search_view=t),e.present_standby_option&&e.present_standby_option===!0&&e.standby_url?($("#standby_link").attr("href",e.standby_url),CogzidelSearch.presentStandbyOption()):($("#standby_link").attr("href",base_url+"messaging/standby"),CogzidelSearch.hideStandbyOption()),o=document.createDocumentFragment(),c=$("#badge_template"),d=$("#list_view_item_template"),s="list"===CogzidelSearch.currentViewType?"x_small":"small",n=CogzidelSearch.thumbnailStyles[s],$.each(e.properties,function(e,t){var s,l,c,p,u=t.hosting_thumbnail_url;window.google&&window.google.maps&&(c=new google.maps.LatLng(t.lat,t.lng),AMM.add(c,t),i!==r&&i.extend(c)),SS&&t.picture_ids&&(SS.addHostingAndIds(t.id,t.picture_ids),SS.pictureArrays&&void 0!==SS.pictureArrays[t.id][0]?t.smallThumbnail=SS.fullImageUrl(SS.pictureArrays[t.id][0]):SS.pictureArrays[t.id]=[]),("list"===CogzidelSearch.currentViewType||"photo"===CogzidelSearch.currentViewType)&&(l={hosting_name:t.name,user_name:t.user_name,user_id:t.user_id,hosting_id:t.id,result_number:e+1,address:t.address,price:t.price,symbol:t.symbol,views:t.page_viewed,staggered:t.staggered,short_listed:t.short_listed,hosting_thumbnail_url:u,hosting_thumbnail_width:n[1],hosting_thumbnail_height:n[0],connections:t.relationships||[],hasVideo:t.has_video,isNewHosting:t.is_new_hosting&&t.is_new_hosting===!0,hasInstantBook:t.instant_book&&t.instant_book===!0,distance:t.distance},t.user_thumbnail_url&&"/"!==t.user_thumbnail_url.charAt(0)&&(l.user_thumbnail_url=t.user_thumbnail_url),(t.price>999&&""!==CogzidelSearch.currencySymbolRight||t.staggered)&&(h=!0),p=$(d.jqote(l,"*")),s="",t.review_count>0&&(s+=a("reviews",t.review_count,1==t.review_count?Translations.review:Translations.reviews)),t.recommendation_count>0&&(s+=a("friends",t.recommendation_count,1==t.recommendation_count?Translations.friend:Translations.friends)),t.user_is_superhost>0&&(s+=a("superhost","",Translations.superhost)),s&&p.find("ul.reputation").append(s),o.appendChild(p[0]))}),$("#results").toggleClass("mini_prices",h).append(o.cloneNode(!0)),l=$("#map_message"),"map"===CogzidelSearch.currentViewType?e.properties&&e.properties.length==CogzidelSearch.params.per_page||!redoSearchInMapIsChecked()?(redoSearchInMapIsChecked()?l.html(['<span class="zoom_in_to_see_more_properties">',Translations.zoom_in_to_see_more_properties,"</span>"].join("")):l.html(["<h3>",Translations.zoom_in_to_see_more_properties,"</h3>",'<span id="redo_search_in_map_tip">',Translations.redo_search_in_map_tip,"</span>"].join("")),l.removeClass("tall_message").addClass("short_message").show()):e.properties&&0!==e.properties.length?l.hide():(l.html(["<h3>",Translations.your_search_was_too_specific,"</h3>","<p>",Translations.we_suggest_unchecking_a_couple_filters,"</p>"].join("")),l.removeClass("short_message").addClass("tall_message").show()):l.hide(),AMM.currentBounds=i,AMM.clearOverlays(!0),AMM.showOverlays(),!(e.properties&&e.properties.length>0)||CogzidelSearch.results_changed_by_map_action!==!1&&CogzidelSearch.changing_display_type!==!0||redoSearchInMapIsChecked()&&!CogzidelSearch.locationHasChanged||AMM.fitBounds(i),e.properties&&e.properties.length>0?$("#results_footer").show():($("#results_footer").hide(),CogzidelSearch.showBlankState()),hideLoadingOverlays(),!0}function killActiveAjaxRequest(){CogzidelSearch.activeAjaxRequest&&(CogzidelSearch.activeAjaxRequest.abort(),CogzidelSearch.activeAjaxRequest=null,hideLoadingOverlays())}!function(e,r,a){function i(e){return e=e||location.href,"#"+e.replace(/^[^#]*#?(.*)$/,"$1")}var o,t="hashchange",n=document,s=e.event.special,l=n.documentMode,c="on"+t in r&&(l===a||l>7);e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)},e.fn[t].delay=50,s[t]=e.extend(s[t],{setup:function(){return c?!1:(e(o.start),void 0)},teardown:function(){return c?!1:(e(o.stop),void 0)}}),o=function(){function o(){var a=i(),n=u(d);a!==d?(p(d=a,n),e(r).trigger(t)):n!==d&&(location.href=location.href.replace(/#.*/,"")+n),s=setTimeout(o,e.fn[t].delay)}var s,l={},d=i(),h=function(e){return e},p=h,u=h;return l.start=function(){s||o()},l.stop=function(){s&&clearTimeout(s),s=a},e.browser.msie&&!c&&function(){var r,a;l.start=function(){r||(a=e.fn[t].src,a=a&&a+i(),r=e('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){a||p(i()),o()}).attr("src",a||"javascript:0").insertAfter("body")[0].contentWindow,n.onpropertychange=function(){try{"title"===event.propertyName&&(r.document.title=n.title)}catch(e){}})},l.stop=h,u=function(){return i(r.location.href)},p=function(a,i){var o=r.document,s=e.fn[t].domain;a!==i&&(o.title=n.title,o.open(),s&&o.write('<script>document.domain="'+s+'"</script>'),o.close(),r.location.hash=a)}}(),l}()}(jQuery,this);var Translations={clear_dates:"Clear Dates",entire_place:"Entire Place",friend:"friend",friends:"friends",loading:"Loading",neighborhoods:"Neighborhoods",private_room:"Private Room",review:"review",reviews:"reviews",superhost:"superhost",shared_room:"Shared Room",today:"Today",you_are_here:"You are Here",a_friend:"a friend",distance_away:"away",instant_book:"Instant Book",social_connections:"Social Connections",show_more:"Show More...",learn_more:"Learn More",amenities:"Amenities",room_type:"Room Type",price:"Price",keywords:"Keywords",property_type:"Property Type",bedrooms:"Bedrooms",bathrooms:"Bathrooms",beds:"Beds",languages:"Languages",collection:"Collection",host:"Host",group:"Group",connections:"Connections",night_writer:"NightWriter",redo_search_in_map_tip:'"Redo search in map" must be checked to see new results as you move the map',zoom_in_to_see_more_properties:"Zoom in to see more properties",your_search_was_too_specific:"Your search was a little too specific.",we_suggest_unchecking_a_couple_filters:"We suggest unchecking a couple filters, zooming out, or searching for a different city."},MapIcons={centerPoint:!1,numbered:[],numberedHover:[],numberedStarred:[],numberedStarredHover:[],numberedVisited:[],numberedVisitedHover:[],numberedVisitedStarred:[],numberedVisitedStarredHover:[],small:!1,smallHover:!1,smallStarred:!1,smallStarredHover:!1,smallVisited:!1,smallVisitedHover:!1,smallVisitedStarred:!1,smallVisitedStarredHover:!1,shadowStandard:!1,shadowSmall:!1,shadowCenterPoint:!1,init:function(){MapIcons.centerPoint=new google.maps.MarkerImage(base_url+"images/map_icons/icon_center_point.png",new google.maps.Size(15,36),new google.maps.Point(0,0)),MapIcons.small=new google.maps.MarkerImage(base_url+"images/map_icons/small_pins.png",new google.maps.Size(9,9),new google.maps.Point(0,0)),MapIcons.smallHover=new google.maps.MarkerImage(base_url+"images/map_icons/small_pins.png",new google.maps.Size(9,9),new google.maps.Point(9,0)),MapIcons.smallStarred=new google.maps.MarkerImage(base_url+"images/map_icons/small_pins.png",new google.maps.Size(9,9),new google.maps.Point(0,9)),MapIcons.smallStarredHover=new google.maps.MarkerImage(base_url+"images/map_icons/small_pins.png",new google.maps.Size(9,9),new google.maps.Point(9,9)),MapIcons.smallVisited=new google.maps.MarkerImage(base_url+"images/map_icons/small_pins.png",new google.maps.Size(9,9),new google.maps.Point(18,0)),MapIcons.smallVisitedHover=new google.maps.MarkerImage(base_url+"images/map_icons/small_pins.png",new google.maps.Size(9,9),new google.maps.Point(27,0)),MapIcons.smallVisitedStarred=new google.maps.MarkerImage(base_url+"images/map_icons/small_pins.png",new google.maps.Size(9,9),new google.maps.Point(18,9)),MapIcons.smallVisitedStarredHover=new google.maps.MarkerImage(base_url+"images/map_icons/small_pins.png",new google.maps.Size(9,9),new google.maps.Point(27,9));for(var e=0;20>e;e++)MapIcons.numbered[e+1]=new google.maps.MarkerImage(base_url+"images/map_icons/map_pins_sprite_001.png",new google.maps.Size(22,34),new google.maps.Point(0,34*e)),MapIcons.numberedHover[e+1]=new google.maps.MarkerImage(base_url+"images/map_icons/map_pins_sprite_001.png",new google.maps.Size(22,34),new google.maps.Point(44,34*e)),MapIcons.numberedStarred[e+1]=new google.maps.MarkerImage(base_url+"images/map_icons/map_pins_sprite_001.png",new google.maps.Size(22,34),new google.maps.Point(22,34*e)),MapIcons.numberedStarredHover[e+1]=new google.maps.MarkerImage(base_url+"images/map_icons/map_pins_sprite_001.png",new google.maps.Size(22,34),new google.maps.Point(66,34*e)),MapIcons.numberedVisited[e+1]=new google.maps.MarkerImage(base_url+"images/map_icons/map_pins_sprite_001.png",new google.maps.Size(22,34),new google.maps.Point(88,34*e)),MapIcons.numberedVisitedHover[e+1]=new google.maps.MarkerImage(base_url+"images/map_icons/map_pins_sprite_001.png",new google.maps.Size(22,34),new google.maps.Point(132,34*e)),MapIcons.numberedVisitedStarred[e+1]=new google.maps.MarkerImage(base_url+"images/map_icons/map_pins_sprite_001.png",new google.maps.Size(22,34),new google.maps.Point(110,34*e)),MapIcons.numberedVisitedStarredHover[e+1]=new google.maps.MarkerImage(base_url+"images/map_icons/map_pins_sprite_001.png",new google.maps.Size(22,34),new google.maps.Point(154,34*e));MapIcons.shadowCenterPoint=new google.maps.MarkerImage(base_url+"images/map_icons/icon_center_point_shadow.png",new google.maps.Size(35,27),new google.maps.Point(0,0),new google.maps.Point(4,27)),MapIcons.shadowSmall=new google.maps.MarkerImage(base_url+"images/map_icons/icon_small_dot_shadow.png",new google.maps.Size(11,11),new google.maps.Point(0,0),new google.maps.Point(5,9)),MapIcons.shadowStandard=new google.maps.MarkerImage(base_url+"images/map_icons/default_shadow.png",new google.maps.Size(33,26),new google.maps.Point(0,0),new google.maps.Point(5,23))}},CogzidelSearch={thumbnailRegex:/\/[^\/]*\.jpg$/,thumbnailStyles:{x_small:[74,114],small:[144,216]},hideBannerForRemainderOfSession:!1,forcedViewType:!1,code:!1,eventId:!1,hostId:!1,hostName:"",forceHideHost:!1,groupId:!1,groupName:"",forceHideGroup:!1,isViewingStarred:!1,collectionId:!1,collectionName:"",forceHideCollection:!1,viewTypes:{1:"list",2:"photo",3:"map"},activeAjaxRequest:null,loadingMessageTimeout:!1,newSearch:!1,currentViewType:"list",results_changed_by_map_action:!1,changing_display_type:!1,shareLightbox:!1,params:{},currencySymbolRight:"",initialLoadComplete:!1,resultsJson:!1,locationHasChanged:!1,viewedIds:[],updateFacebookBannerText:function(){CogzidelSearch.params.location&&(jQuery("#connect_banner .general").hide(),jQuery("#connect_banner .specific").find("span.place").text(CogzidelSearch.params.location).end().show())},initFacebookBannerTooltip:function(){var e=jQuery("#what_does_this_do_tooltip");if(e.length){var r=jQuery("#connect_banner a.what_does_this_do"),a=e.css("width").split("px")[0];e.appendTo("body"),r.hover(function(){var i=r.width(),o=r.offset(),t=o.left+i/2-a/2;e.css({left:t+"px",top:o.top+23+"px"}).fadeIn("fast")},function(){e.fadeOut("fast")})}},init:function(e){function r(){var e=jQuery(window).scrollTop(),r=n.position().top;e>=l&&t>c?(n.hasClass("fixed")||n.addClass("fixed"),c+r>=o&&e>=r?n.css({position:"absolute",top:o-c+1+"px"}):"absolute"===n.css("position")&&n.css({position:"",top:"0"})):a()}function a(){n.hasClass("fixed")&&n.removeClass("fixed"),"absolute"===n.css("position")&&n.css({position:"",top:"0"})}function i(){c=n.height(),r(),r()}CogzidelSearch.viewedIds=CogzidelSearch.getViewedPage3Ids(),e=e||{},e.min_bathrooms&&$("#min_bathrooms").val(e.min_bathrooms),e.min_bedrooms&&$("#min_bedrooms").val(e.min_bedrooms),e.min_beds&&$("#min_beds").val(e.min_beds),e.page&&($("#page").val(e.page),CogzidelSearch.params.page=e.page),e.sort&&($("#sort").val(e.sort),CogzidelSearch.params.sort=e.sort),e.property_type&&($("#property_type").val(e.property_type),CogzidelSearch.params.property_type=e.property_type),e.neighborhoods&&(CogzidelSearch.params.neighborhoods=e.neighborhoods),e.hosting_amenities&&(CogzidelSearch.params.hosting_amenities=e.hosting_amenities),e.room_types&&(CogzidelSearch.params.room_types=e.room_types),e.property_type_id&&(CogzidelSearch.params.property_type_id=e.property_type_id),e.connected&&(CogzidelSearch.params.connected="true"),e.night_writer&&(CogzidelSearch.params.night_writer="true"),e.guests&&($("#number_of_guests").val(e.guests),CogzidelSearch.params.guests=e.guests),e.price_min&&(CogzidelSearch.params.price_min=e.price_min),e.price_max&&(CogzidelSearch.params.price_max=e.price_max),$("#search_type_toggle").each(function(){$(this).delegate(".search_type_option","click",function(){display_search_type(this.id)}),$(this).delegate(".search_type_option","hover",function(e){$(this).toggleClass("search_type_option_hover","mouseenter"===e.type)})}),$("#reinstate_collections").live("click",function(){SearchFilters.reinstateCollections(),$(this).remove()}),$("#reinstate_user").live("click",function(){SearchFilters.reinstateHost(),$(this).remove()}),$("#reinstate_group").live("click",function(){SearchFilters.reinstateGroup(),$(this).remove()}),$("#share_results_link").colorbox({inline:!0,width:500,href:"#share_lightbox",onComplete:function(){var e=$("#share_url").val([Translations.loading,"..."].join(""));CogzidelSearch.setParamsFromDom(),CogzidelSearch.activeAjaxRequest=$.getJSON(base_url+"search/create",CogzidelSearch.params,function(r){e.val([base_url+"search?code=",r.search.code].join("")).select()})}}),$("#keywords").live("keyup",function(e){var r=e.keyCode?e.keyCode:e.which;if(13==r){var a=jQuery("#keywords");a.attr("defaultValue")!==a.val()&&CogzidelSearch.loadNewResults()}}),$("#redo_search_in_map_link_on").live("click",function(){return jQuery("#redo_search_in_map").attr("checked",!0),AMM.redoSearchPromptTimeout&&(clearTimeout(AMM.redoSearchPromptTimeout),AMM.redoSearchPromptTimeout=!1),jQuery("#first_time_map_question").fadeOut(500),AMM.closeInfoWindow(),CogzidelSearch.results_changed_by_map_action=!0,CogzidelSearch.loadNewResults(),!1}),jQuery("#redo_search_in_map_link_off").live("click",function(){return AMM.redoSearchPromptTimeout&&(clearTimeout(AMM.redoSearchPromptTimeout),AMM.redoSearchPromptTimeout=!1),jQuery("#first_time_map_question").fadeOut(500),!1}),jQuery("#share_url").live("focus",function(){jQuery(this).select()}),jQuery(".pagination a").live("click",function(){var e=jQuery(this),r=e.html();return r="next"==e.attr("rel")?parseInt(jQuery("div.pagination span.current").html(),10)+1:"prev"==e.attr("rel")?parseInt(jQuery("div.pagination span.current").html(),10)-1:parseInt(r,10),(isNaN(r)||1>r)&&(r=1),jQuery("#page").val(r),CogzidelSearch.loadNewResults(),!1});var o,t,n=jQuery("#search_filters"),s=jQuery("#search_body"),l=n.position().top,c=n.height();if(CogzidelSearch.$.bind("finishedrendering",function(){l=s.position().top,c=n.height(),t=s.height(),o=l+t,t>c&&"map"!==CogzidelSearch.currentViewType?(jQuery(window).scroll(r).scroll(),CogzidelSearch.$.bind("filtertoggle",i)):(jQuery(window).unbind("scroll",r),CogzidelSearch.$.unbind("filtertoggle",i),a())}),jQuery("#search_filters_toggle").live("click",function(){var e=jQuery(this);e.hasClass("search_filters_toggle_off")?(jQuery("#Mab_Big_Main").width(699),jQuery("#map_message").width(507),jQuery("#search_map").width(679)):(jQuery("#Mab_Big_Main").width(958),jQuery("#search_map").width(940),jQuery("#map_message").width(752)),e.toggleClass("search_filters_toggle_on search_filters_toggle_off"),jQuery("#search_filters").toggle(),google.maps.event.trigger(AMM.map,"resize")}),$("#results_filters").delegate(".filter_x_container","click",function(){SearchFilters.appliedFilterXCallback(this)}),$.each($(".inner_text"),function(e,r){var a=$(r).next("input"),i=a.val();a.attr("defaultValue",r.innerHTML),a.val(r.innerHTML),i.length>0&&(a.val(i),a.addClass("active")),a.bind("focus",function(){return $(a).val()==a.attr("defaultValue")&&($(a).val(""),$(a).addClass("active")),$(a).removeClass("error"),!0}),a.bind("blur",function(){""===$(a).val()?($(a).removeClass("active"),$(a).val(a.attr("defaultValue"))):$(a).removeClass("error")}),$(r).remove()}),$("#location_label").show(),e.location&&$("#location").val(e.location).addClass("active"),CogzidelSearch.initialLoadComplete===!1){var d=$.datepicker._defaults.dateFormat,h={minDate:0,maxDate:"+2Y",nextText:"",prevText:"",numberOfMonths:1,closeText:Translations.clear_dates,currentText:Translations.today,showButtonPanel:!0},p=jQuery.extend(!0,{},h),u=jQuery.extend(!0,{},h);if("undefined"!=typeof e.checkin&&"undefined"!=typeof e.checkout&&e.checkin!==d&&e.checkout!==d?(jQuery("#checkin").val(e.checkin),jQuery("#checkout").val(e.checkout),p=jQuery.extend(p,{defaultDate:e.checkin}),u=jQuery.extend(u,{defaultdate:e.checkout})):(jQuery("#checkin").val(d),jQuery("#checkout").val(d),jQuery("#search_inputs").css("background-color","#ffe75f")),jQuery("#search_form").cogzidelInputDateSpan({defaultsCheckin:p,defaultsCheckout:u,onSuccess:function(){CogzidelSearch.loadNewResults()}}),jQuery("ul.collapsable_filters li input:checkbox, ul#lightbox_filters input:checkbox").live("click",function(){var e=!1,r=jQuery(this).attr("id"),a=jQuery(this).attr("name"),i=jQuery(this).attr("value");-1===r.indexOf("lightbox")?(r=["#lightbox_",r].join(""),e=!0):r=["#",r.replace("lightbox_","")].join(""),jQuery(r)&&(jQuery(this).is(":checked")?jQuery(['input:checkbox[name="',a,'"][value="',i,'"]'].join("")).attr("checked",!0):jQuery(['input:checkbox[name="',a,'"][value="',i,'"]'].join("")).attr("checked",!1)),e===!0&&CogzidelSearch.loadNewResults()}),jQuery("a.show_more_link").live("click",function(){SearchFilters.openFiltersLightbox();var e=jQuery(this).closest(".search_filter").attr("id").replace("_container","");SearchFilters.selectLightboxTab(e)}),jQuery("#lightbox_search_button").live("click",function(){CogzidelSearch.loadNewResults()}),jQuery(".filters_lightbox_nav_element").live("click",function(){var e=jQuery(this).attr("id").replace("lightbox_nav_","");SearchFilters.selectLightboxTab(e)}),jQuery("#sort").change(function(){CogzidelSearch.loadNewResults()}),jQuery("#property_type").change(function(){CogzidelSearch.loadNewResults()}),jQuery("#min_bedrooms").change(function(){CogzidelSearch.loadNewResults()}),jQuery("#number_of_guests").change(function(){CogzidelSearch.loadNewResults()}),jQuery("a.filter_header, a.filter_toggle").live("click",function(){jQuery(this).closest(".search_filter").toggleClass("closed open"),CogzidelSearch.$.trigger("filtertoggle")}),jQuery(".search_result").live("mouseenter",function(e){CogzidelSearch.hoverListResult(e.currentTarget.id.split("_")[1])}),jQuery(".search_result").live("mouseleave",function(e){CogzidelSearch.unHoverListResult(e.currentTarget.id.split("_")[1])}),jQuery("#slider-range").slider({range:!0,min:SearchFilters.minPrice,max:SearchFilters.maxPrice,step:5,values:[e.price_min?parseInt(e.price_min,10):SearchFilters.minPrice,e.price_max?parseInt(e.price_max,10):SearchFilters.maxPrice],slide:function(e,r){SearchFilters.applyPriceSliderChanges(r)},change:function(e){e&&e.originalEvent&&"mouseup"===e.originalEvent.type&&CogzidelSearch.loadNewResults()}}),SearchFilters.applyPriceSliderChanges(),window.google&&window.google.maps&&e.search_by_map&&e.ne_lng&&e.ne_lat&&e.sw_lng&&e.sw_lat){AMM.initMapOnce("search_map");var g={sw_lat:e.sw_lat,sw_lng:e.sw_lng,ne_lat:e.ne_lat,ne_lng:e.ne_lng};CogzidelSearch.params.forceBounds=g;var m=new google.maps.LatLng(g.sw_lat,g.sw_lng),_=new google.maps.LatLng(g.ne_lat,g.ne_lng);AMM.fitBounds(new google.maps.LatLngBounds(m,_)),jQuery("#redo_search_in_map").attr("checked",!0),CogzidelSearch.params=e}CogzidelSearch.loadNewResults(!0),CogzidelSearch.params=e,jQuery("#redo_search_in_map").bind("change",function(){AMM.redoSearchPromptTimeout&&(clearTimeout(AMM.redoSearchPromptTimeout),AMM.redoSearchPromptTimeout=!1,jQuery("#first_time_map_question").fadeOut(250)),redoSearchInMapIsChecked()?(AMM.closeInfoWindow(),CogzidelSearch.results_changed_by_map_action=!0,CogzidelSearch.loadNewResults()):AMM.turnMapListenersOff()})}CogzidelSearch.initFacebookBannerTooltip()},performNewSearch:function(){return CogzidelSearch.newSearch||CogzidelSearch.initialLoadComplete},searchHasBeenModified:function(){try{var e=window.location.hash;if(e){var r=e.split("#")[1].split("&")[0].split("modified=")[1];if("true"===r)return!0}}catch(a){}return!1},setParamsFromDom:function(){var e,r=CogzidelSearch.params;switch(CogzidelSearch.params={},CogzidelSearch.initialLoadComplete===!1&&CogzidelSearch.code&&CogzidelSearch.searchHasBeenModified()===!1&&(CogzidelSearch.params.code=CogzidelSearch.code),CogzidelSearch.eventId&&CogzidelSearch.searchHasBeenModified()===!1&&(CogzidelSearch.params.event_id=CogzidelSearch.eventId),CogzidelSearch.performNewSearch()&&(CogzidelSearch.params.new_search=!0),AMM.new_bounds=AMM.mapLoaded?AMM.map.getBounds()||!1:!1,CogzidelSearch.currentViewType){case"list":CogzidelSearch.params.search_view=1;break;case"photo":CogzidelSearch.params.search_view=2;break;case"map":CogzidelSearch.params.search_view=3;break;default:CogzidelSearch.params.search_view=1}CogzidelSearch.params.min_bedrooms=$("#min_bedrooms").val()||"0",CogzidelSearch.params.min_bathrooms=$("#min_bathrooms").val()||"0",CogzidelSearch.params.min_beds=$("#min_beds").val()||"0",CogzidelSearch.params.page=$("#page").val()||"1";var a=jQuery("#location"),i=a.val();i!==a.attr("defaultValue")&&(CogzidelSearch.params.location=i||""),r&&r.location&&r.location==CogzidelSearch.params.location||(CogzidelSearch.locationHasChanged=!0,CogzidelSearch.hideBannerForRemainderOfSession=!1),CogzidelSearch.includeCollectionParam()?CogzidelSearch.params.collection_id=CogzidelSearch.collectionId:SearchFilters.clearCollections(!1),CogzidelSearch.includeHostParam()?CogzidelSearch.params.host_id=CogzidelSearch.hostId:SearchFilters.clearHost(),CogzidelSearch.includeGroupParam()?CogzidelSearch.params.group_id=CogzidelSearch.groupId:SearchFilters.clearGroup();var o=$("#checkin").val(),t=$("#checkout").val();"mm/dd/yyyy"!=o&&(CogzidelSearch.params.checkin=jQuery("#checkin").val()||""),"mm/dd/yyyy"!=t&&(CogzidelSearch.params.checkout=jQuery("#checkout").val()||""),CogzidelSearch.params.guests=jQuery("#number_of_guests").val()||"1",CogzidelSearch.params.sort=jQuery("#sort").val()||"1",CogzidelSearch.params.property_type=jQuery("#property_type").val()||"1",CogzidelSearch.params.room_types=[],jQuery("input[name='room_types']").each(function(e,r){jQuery(r).is(":checked")&&CogzidelSearch.params.room_types.push(jQuery(r).val())}),CogzidelSearch.params.property_type_id=[],jQuery("input[name='property_type_id']").each(function(e,r){jQuery(r).is(":checked")&&CogzidelSearch.params.property_type_id.push(jQuery(r).val())}),CogzidelSearch.params.hosting_amenities=[],jQuery("input[name='amenities']").each(function(e,r){jQuery(r).is(":checked")&&CogzidelSearch.params.hosting_amenities.push(jQuery(r).val())}),CogzidelSearch.isViewingStarred&&(CogzidelSearch.params.starred=!0),jQuery("input[name='connected']").is(":checked")&&(CogzidelSearch.params.connected=!0),jQuery("input[name='night_writer']").is(":checked")&&(CogzidelSearch.params.night_writer=!0),CogzidelSearch.params.languages=[],jQuery("input[name='languages']").each(function(e,r){jQuery(r).is(":checked")&&CogzidelSearch.params.languages.push(jQuery(r).val())}),CogzidelSearch.params.neighborhoods=[],CogzidelSearch.initialLoadComplete===!1&&(e=["neighborhoods","room_types","min_bedrooms","price_min","price_max","guests","property_type_id","connected"],jQuery(e).each(function(e,a){r[a]&&(CogzidelSearch.params[a]=r[a])})),CogzidelSearch.locationHasChanged||(CogzidelSearch.params.sort=jQuery("#sort").val(),jQuery("input[name='neighborhoods']").each(function(e,r){jQuery(r).is(":checked")&&CogzidelSearch.params.neighborhoods.push(jQuery(r).val())})),CogzidelSearch.params.hosting_amenities=CogzidelSearch.params.hosting_amenities.unique(),CogzidelSearch.params.neighborhoods=CogzidelSearch.params.neighborhoods.unique(),CogzidelSearch.params.room_types=CogzidelSearch.params.room_types.unique();var n=jQuery("#keywords");n.attr("defaultValue")!==n.val()&&(CogzidelSearch.params.keywords=n.val());var s=$("#slider-range"),l=s.slider("option","min"),c=s.slider("option","max"),d=s.slider("values",0),h=s.slider("values",1);if((c!==h||l!==d)&&(CogzidelSearch.params.price_min=d,CogzidelSearch.params.price_max=h),redoSearchInMapIsChecked())if(!AMM.new_bounds||CogzidelSearch.locationHasChanged&&!CogzidelSearch.results_changed_by_map_action){if(r&&r.forceBounds){CogzidelSearch.params.sw_lat=r.forceBounds.sw_lat,CogzidelSearch.params.sw_lng=r.forceBounds.sw_lng,CogzidelSearch.params.ne_lat=r.forceBounds.ne_lat,CogzidelSearch.params.ne_lng=r.forceBounds.ne_lng;
var p=new google.maps.LatLng(r.forceBounds.sw_lat,r.forceBounds.sw_lng),u=new google.maps.LatLng(r.forceBounds.ne_lat,r.forceBounds.ne_lng);AMM.new_bounds=new google.maps.LatLngBounds(p,u),AMM.fitBounds(AMM.new_bounds),CogzidelSearch.params.search_by_map=!0}}else CogzidelSearch.params.sw_lat=AMM.new_bounds.getSouthWest().lat(),CogzidelSearch.params.sw_lng=AMM.new_bounds.getSouthWest().lng(),CogzidelSearch.params.ne_lat=AMM.new_bounds.getNorthEast().lat(),CogzidelSearch.params.ne_lng=AMM.new_bounds.getNorthEast().lng(),CogzidelSearch.params.search_by_map=!0;return"photo"===CogzidelSearch.currentViewType?CogzidelSearch.params.per_page=20:"list"===CogzidelSearch.currentViewType?CogzidelSearch.params.per_page=20:"map"===CogzidelSearch.currentViewType&&(CogzidelSearch.params.per_page=40),CogzidelSearch.params},markUrlAsModified:function(){try{window.location.hash="modified=true"}catch(e){}},loadNewResultsWithNoResponse:function(){CogzidelSearch.setParamsFromDom(),CogzidelSearch.params.suppress_response=!0,CogzidelSearch.markUrlAsModified(),CogzidelSearch.activeAjaxRequest=jQuery.getJSON(base_url+"search/ajax_get_results",CogzidelSearch.params,function(){CogzidelSearch.params.suppress_response=!1})},loadNewResultsCallback:function(e){if(!e)return CogzidelSearch.resultsJson=!1,hideLoadingOverlays(),CogzidelSearch.trackSearch(),!1;if(CogzidelSearch.resultsJson=e,render_results(e,AMM.new_bounds)){if(e.params?SearchFilters.update(e.params):e.facets&&SearchFilters.update(e.facets),SearchFilters.per_month!==e.per_month){SearchFilters.per_month=e.per_month;var r=SearchFilters.per_month===!0&&(CogzidelSearch.params.price_min<SearchFilters.minPriceMonthly||CogzidelSearch.params.price_max<SearchFilters.minPriceMonthly),a=SearchFilters.per_month!==!0&&(CogzidelSearch.params.price_min>SearchFilters.maxPrice||CogzidelSearch.params.price_max>SearchFilters.maxPrice),i=r||a;i?(jQuery("#applied_filter_price").remove(),""===jQuery("#applied_filters").html()&&jQuery("#results_filters").hide(),SearchFilters.setPriceSliderLimits(SearchFilters.per_month,!0)):SearchFilters.setPriceSliderLimits(SearchFilters.per_month,!1)}render_results_oncomplete(e)}},loadNewResults:function(e){CogzidelSearch.initialLoadComplete===!0&&CogzidelSearch.markUrlAsModified();var r=e||!1;if(AMM.initMapOnce("search_map"),CogzidelSearch.results_changed_by_map_action===!0&&!redoSearchInMapIsChecked()&&r===!1)return reset_params_to_defaults(),setTimeout(function(){AMM.turnMapListenersOn()},1e3),!0;killActiveAjaxRequest(),SearchFilters.closeFiltersLightbox();var a=jQuery("#search_header").is(":visible"),i=jQuery(window).scrollTop();return(a===!0&&i>275||a===!1&&i>129)&&jQuery("html, body").animate({scrollTop:jQuery("#Selsearch_params").offset().top},"fast"),showLoadingOverlays(),CogzidelSearch.setParamsFromDom(),CogzidelSearch.activeAjaxRequest=jQuery.getJSON(base_url+"search/ajax_get_results",CogzidelSearch.params,CogzidelSearch.loadNewResultsCallback),CogzidelSearch.isViewingStarred?jQuery("#share_results_link").hide():jQuery("#share_results_link").show(),!0},hoverListResult:function(e){var r,a=["#room_",e].join(""),i=AMM.markers[e];jQuery(a).addClass("hover"),SS.initialized===!0&&SS.show(a,e),i&&i.numbered_pin!==!1&&(r=-1!==jQuery.inArray(e.toString(),CogzidelSearch.viewedIds)?MapIcons.numberedVisitedHover[i.numbered_pin+1]:MapIcons.numberedHover[i.numbered_pin+1],i.marker.setIcon(r))},unHoverListResult:function(e){var r,a=AMM.markers[e];jQuery(["#room_",e].join("")).removeClass("hover"),SS.initialized===!0&&SS.reset(),a&&a.numbered_pin!==!1&&(r=-1!==jQuery.inArray(e.toString(),CogzidelSearch.viewedIds)?MapIcons.numberedVisited[a.numbered_pin+1]:MapIcons.numbered[a.numbered_pin+1],a.marker.setIcon(r))},is_map_search:function(){return CogzidelSearch.results_changed_by_map_action&&!CogzidelSearch.changing_display_type},showBlankState:function(){jQuery("#results").html(jQuery("#blank_state_content").html())},markViewedPageLinks:function(){CogzidelSearch.viewedIds!==!1&&0!==CogzidelSearch.viewedIds.size&&jQuery("#results .search_result").each(function(e,r){r=jQuery(r);var a=r.attr("id").replace("room_","");-1!==jQuery.inArray(a,CogzidelSearch.viewedIds)&&r.addClass("visited")})},getViewedPage3Ids:function(){var e=jQuery.cookie("viewed_page3_ids");if(null!==e){var r=e.split(",");return r=r.unique()}return[]},trackSearch:function(){TrackingPixel.track()},presentStandbyOption:function(){$("#standby_action_area").show()},hideStandbyOption:function(){$("#standby_action_area").hide()},includeCollectionParam:function(){return CogzidelSearch.collectionId!==!1&&CogzidelSearch.forceHideCollection===!1&&(CogzidelSearch.searchHasBeenModified()===!1||!CogzidelSearch.params.location||""===CogzidelSearch.params.location)},includeHostParam:function(){return CogzidelSearch.hostId!==!1&&CogzidelSearch.forceHideHost===!1&&(CogzidelSearch.searchHasBeenModified()===!1||!CogzidelSearch.params.location||""===CogzidelSearch.params.location)},includeGroupParam:function(){return CogzidelSearch.groupId!==!1&&CogzidelSearch.forceHideGroup===!1&&(CogzidelSearch.searchHasBeenModified()===!1||!CogzidelSearch.params.location||""===CogzidelSearch.params.location)},$:jQuery(this)},TrackingPixel={params:{uuid:"",user:"",af:"",c:"",pg:"",checkin:"",ngt:"",gc:"1",bc:"",lat:"",lng:""},imgId:"#page2_v3_tp",BASE_URL:"http://pluto.cogzidel.com/t/t.php?",updateParamsFromDom:function(){if(AMM.map){var e=AMM.map.getCenter();TrackingPixel.params.lat=e.lat(),TrackingPixel.params.lng=e.lng()}var r=jQuery("#checkin").val(),a=jQuery("#checkout").val();if("mm/dd/yyyy"==r||"mm/dd/yyyy"==a)TrackingPixel.params.checkin="",TrackingPixel.params.checkout="";else{TrackingPixel.params.checkin=r;var i=new Date(r),o=new Date(a),t=864e5,n=Math.abs(i.getTime()-o.getTime()),s=Math.round(n/t);TrackingPixel.params.ngt=s||""}TrackingPixel.params.gc=jQuery("#number_of_guests").val()||"1"},serializedParams:function(){return jQuery.param(TrackingPixel.params)},updateImgSrc:function(){var e=jQuery(TrackingPixel.imgId);if(e){var r=[TrackingPixel.BASE_URL,TrackingPixel.serializedParams()].join("");e.attr("src",r)}},track:function(){TrackingPixel.updateParamsFromDom(),TrackingPixel.updateImgSrc()}},AMM={map:"",isFirstMapInteraction:!0,redoSearchPromptTimeout:!1,overlay:!1,mapLoaded:!1,new_bounds:!1,currentBounds:!1,currentHighestZIndex:0,activeInfoWindow:null,activeInfoWindowMarker:!1,queue:[],activeHostingIds:[],markers:{},defaultMapOptions:{},centerLat:!1,centerLng:!1,centerMarker:!1,geocodePrecision:!1,initMapOnce:function(e){AMM.mapLoaded===!1&&(window.google&&window.google.maps?($("#map_options").show(),$("#map_wrapper").show(),AMM.defaultMapOptions={zoom:6,center:new google.maps.LatLng(40.7442,-73.9861),mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,navigationControl:!0,navigationControlOptions:{position:google.maps.ControlPosition.LEFT},scaleControl:!0,scrollwheel:!1},AMM.map=new google.maps.Map(document.getElementById(e),AMM.defaultMapOptions),AMM.overlay=new google.maps.OverlayView,AMM.overlay.draw=function(){},AMM.overlay.setMap(AMM.map),MapIcons.init(),AMM.mapLoaded=!0):($("#map_options").hide(),$("#map_wrapper").hide()))},add:function(e,r){AMM.markers[r.id]||(AMM.markers[r.id]={location:e,details:r,active:!1}),AMM.queue.push(r.id)},drawCenterMarker:function(){if(AMM.clearCenterMarker(),AMM.mapLoaded&&AMM.centerLat&&AMM.centerLng){var e=1;AMM.geocodePrecision&&"address"==AMM.geocodePrecision&&(e=100);var r=new google.maps.LatLng(AMM.centerLat,AMM.centerLng),a=new google.maps.Marker({position:r,map:AMM.map,icon:MapIcons.centerPoint,shadow:MapIcons.shadowCenterPoint,title:Translations.you_are_here,zIndex:e});AMM.centerMarker=a;var i=AMM.currentBounds;i===!1&&(i=new google.maps.LatLngBounds),i.extend(r)}},clearCenterMarker:function(){AMM.centerMarker!==!1&&(AMM.centerMarker.setMap(null),AMM.centerMarker=!1)},clearOverlays:function(e){AMM.markers&&jQuery.each(AMM.markers,function(r){(-1===jQuery.inArray(parseInt(r,10),AMM.queue)||e===!0)&&AMM.removeOverlay(r)})},openInfoWindow:function(e,r,a){var i=AMM.activeInfoWindow;AMM.activeInfoWindowMarker=r,i?(i.setContent(e),i.open(AMM.map,r)):(i=AMM.activeInfoWindow=new google.maps.InfoWindow({content:e,maxWidth:241}),google.maps.event.addListenerOnce(i,"closeclick",function(){i=AMM.activeInfoWindow=AMM.activeInfoWindowMarker=null}),i.open(AMM.map,r)),SS.initialized===!0&&(SS.reset(),google.maps.event.addListenerOnce(i,"domready",function(){"undefined"!=typeof SS.pictureArrays[a]&&jQuery(".map_info_window").find("img").attr("src",SS.fullImageUrl(SS.pictureArrays[a][0])),SS.show(".map_info_window",a)}))},closeInfoWindow:function(){return AMM.activeInfoWindow?(google.maps.event.clearInstanceListeners(AMM.activeInfoWindow),AMM.activeInfoWindow.close(),AMM.activeInfoWindow=AMM.activeInfoWindowMarker=null,SS.initialized===!0&&SS.hide(),!0):!1},removeOverlay:function(e){var r=AMM.markers[e];r.active===!0&&(r.infoWindow&&(google.maps.event.clearInstanceListeners(r.infoWindow),r.infoWindow=null),google.maps.event.clearInstanceListeners(r.marker),r.marker.setMap(null),r.marker=null,r.active=!1)},showOverlays:function(){var e=20,r=AMM.queue.length;jQuery.each(AMM.queue,function(a,i){var o,t,n,s,l=AMM.markers[i];if(l&&!l.active){if(o=l.details,s=-1!==jQuery.inArray(i.toString(),CogzidelSearch.viewedIds),e>a?(t=s?MapIcons.numberedVisited[a+1]:MapIcons.numbered[a+1],l.numbered_pin=a,n=new google.maps.Marker({position:l.location,map:AMM.map,icon:t,shadow:MapIcons.shadowStandard,title:[a+1,". ",o.name].join(""),zIndex:r-a})):(t=s?MapIcons.smallVisited:MapIcons.small,l.numbered_pin=!1,n=new google.maps.Marker({position:l.location,map:AMM.map,icon:t,shadow:MapIcons.shadowSmall,title:o.name,zIndex:r-a})),"map"===CogzidelSearch.currentViewType){var c=1===o.review_count?Translations.review:Translations.reviews,d=['<div class="map_info_window">','<a class="map_info_window_link_image" href="'+base_url+"rooms/",i,'" />','<img width="210" height="140" class="map_info_window_thumbnail" src="',o.smallThumbnail,'" />',"</a>",'<p class="map_info_window_details">','<a class="map_info_window_link" href="'+base_url+"rooms/",i,'" />',o.name,"</a>",'<span class="map_info_window_review_count">',o.review_count," ",c,"</span>",'<span class="map_info_window_price">',o.symbol,o.price,CogzidelSearch.currencySymbolRight,"</span>","</p>","</div>"].join("");google.maps.event.addListener(n,"click",function(){AMM.openInfoWindow(d,n,i)})}else google.maps.event.addListener(n,"mouseover",function(){CogzidelSearch.hoverListResult(i)}),google.maps.event.addListener(n,"mouseout",function(){CogzidelSearch.unHoverListResult(i)}),google.maps.event.addListener(n,"click",function(){CogzidelSearch.viewedIds.push(i.toString());var e=MapIcons.numberedVisitedHover[l.numbered_pin+1];l.marker.setIcon(e),window.location=[base_url+"rooms/",i].join("")});l.marker=n,l.active=!0}}),AMM.clearQueue()},clearQueue:function(){AMM.queue=[]},turnMapListenersOn:function(){AMM.listenForMapChanges()},turnMapListenersOff:function(){AMM.mapLoaded&&google.maps.event.clearListeners(AMM.map,"idle")},listenForMapChanges:function(){AMM.mapLoaded&&google.maps.event.addListener(AMM.map,"idle",function(){AMM.mapListenerCallback()})},fitBounds:function(e){AMM.mapLoaded&&AMM.map.fitBounds(e)},mapListenerCallback:function(){if(AMM.isFirstMapInteraction===!0){AMM.isFirstMapInteraction=!1;var e=jQuery("#first_time_map_question");if(!redoSearchInMapIsChecked())return AMM.redoSearchPromptTimeout=setTimeout(function(){e.fadeOut(2e3)},14e3),e.show(),!1}if(AMM.activeInfoWindow&&AMM.activeInfoWindowMarker){var r=AMM.overlay.getProjection().fromLatLngToContainerPixel(AMM.activeInfoWindowMarker.getPosition()),a=r.x,i=r.y,o=82,t=jQuery("#search_map"),n=t.width(),s=t.height(),l=260,c=250,d=l/2,h=c/2;redoSearchInMapIsChecked()?(h>a||d>i||a>n-h+o/2||i>s+1.33*d)&&AMM.closeInfoWindow():(0>a||0>i||a>n+o||i>s+l)&&AMM.closeInfoWindow()}AMM.activeInfoWindow||(CogzidelSearch.results_changed_by_map_action=!0,CogzidelSearch.loadNewResults())}},Connections={COOKIE_NAME:"cogzidel_connect_banner",COOKIE_HIDE_VALUE:"hide",init:function(){var e=$("#connect_banner"),r=$("#airtv_promo"),a=jQuery.cookie(Connections.COOKIE_NAME);r.length<1&&e.length>0&&a!==Connections.COOKIE_HIDE_VALUE&&($("#connect_banner_close").click(Connections.closeClickHandler),$("#fb-connect-banner-button").click(Connections.connectButtonClickHandler),e.show())},closeClickHandler:function(e){$.cookie(Connections.COOKIE_NAME,Connections.COOKIE_HIDE_VALUE,{expires:90,path:"/"}),$b.remove(),$b=null,Connections.trackEvent("hidePage2Banner"),e.preventDefault()},connectButtonClickHandler:function(){var e="loading",r=$(this).addClass(e);return Cogzidel.FBConnect.startLoginFlow(),Cogzidel.FBConnect.one("connect_success",function(){Connections.trackEvent("page2FbConnect")}),Cogzidel.FBConnect.one("connect_cancel",function(){Connections.trackEvent("page2FbCancel"),r.removeClass(e)}),Cogzidel.FBConnect.one("bail",function(){Connections.trackEvent("page2FbBail"),r.removeClass(e)}),Cogzidel.FBConnect.one("complete",function(){Connections.trackEvent("page2FbComplete")}),!1},trackEvent:function(e){_gaq.push(["_trackEvent","SocialConnections",e])}},SearchFilters={defaults:{callbackFunction:"CogzidelSearch.loadNewResults",maxFilters:4},has_photo:[],host_has_photo:[],languages:[],property_type_id:[],top_neighborhoods:[],neighborhoods:[],top_amenities:[],amenities:[],min_bedrooms:[],min_beds:[],min_bathrooms:[],group_ids:[],room_types:[[0,[Translations.private_room,0]],[1,[Translations.shared_room,0]],[2,[Translations.entire_place,0]]],minPrice:10,maxPrice:1e4,minPriceMonthly:150,maxPriceMonthly:5e3,per_month:!1,filtersLightbox:!1,applyPriceSliderChanges:function(e){var r=jQuery("#slider-range").slider("option","max");void 0!==e?(jQuery("#slider_user_min").html([e.values[0],CogzidelSearch.currencySymbolRight].join("")),jQuery("#slider_user_max").html([e.values[1],e.values[1]===r?"+ ":"",CogzidelSearch.currencySymbolRight].join(""))):(jQuery("#slider_user_min").html([jQuery("#slider-range").slider("values")[0],CogzidelSearch.currencySymbolRight].join("")),jQuery("#slider_user_max").html([jQuery("#slider-range").slider("values")[1],jQuery("#slider-range").slider("values")[1]===r?"+ ":"",CogzidelSearch.currencySymbolRight].join("")))},setPriceSliderLimits:function(e,r){var a,i,o;e===!0?(a=SearchFilters.minPriceMonthly,i=SearchFilters.maxPriceMonthly):(a=SearchFilters.minPrice,i=SearchFilters.maxPrice),jQuery("#slider-range").slider("option","min",a),jQuery("#slider-range").slider("option","max",i),o="+ ",r===!1&&CogzidelSearch.params.price_min&&CogzidelSearch.params.price_max&&(a=CogzidelSearch.params.price_min,i=CogzidelSearch.params.price_max,o=""),jQuery("#slider-range").slider("values",0,a),jQuery("#slider-range").slider("values",1,i),jQuery("#slider_user_min").html([a,CogzidelSearch.currencySymbolRight].join("")),jQuery("#slider_user_max").html([i,o,CogzidelSearch.currencySymbolRight].join(""))},update:function(e){SearchFilters.setFacets(e),SearchFilters.render()},setFacets:function(e){SearchFilters.connected=e.connected||[],SearchFilters.room_types=e.room_type||[],SearchFilters.top_neighborhoods=e.top_neighborhoods||[],SearchFilters.neighborhoods=e.neighborhood_facet||[],SearchFilters.top_amenities=e.top_amenities||[],SearchFilters.amenities=e.hosting_amenity_ids||[],SearchFilters.has_photo=e.has_photo||[],SearchFilters.host_has_photo=e.host_has_photo||[],SearchFilters.languages=e.languages||[],SearchFilters.property_type_id=e.property_type_id||[],SearchFilters.group_ids=e.group_ids||[],SearchFilters.night_writer=e.night_writer||[]},render:function(){return SearchFilters.renderSocialConnections(),SearchFilters.renderNightWriter(),SearchFilters.renderRoomTypes(),SearchFilters.renderAmenities(),SearchFilters.renderNeighborhoods(),SearchFilters.renderGenericLightboxFacet("property_type_id"),SearchFilters.renderGenericLightboxFacet("languages"),SearchFilters.renderGenericLightboxFacet("group_ids"),SearchFilters.renderAppliedFilters(),!0},APPLIED_FILTER_NAMES:{neighborhoods:Translations.neighborhoods,hosting_amenities:Translations.amenities,room_types:Translations.room_type,price:Translations.price,keywords:Translations.keywords,property_type_id:Translations.property_type,min_bedrooms:Translations.bedrooms,min_bathrooms:Translations.bathrooms,min_beds:Translations.beds,languages:Translations.languages,collection:Translations.collection,starred:"Starred Items",host:Translations.host,group:Translations.group,connections:Translations.connections,night_writer:Translations.night_writer},renderAppliedFilters:function(){var e;if(jQuery("#applied_filters").empty(),CogzidelSearch.params.neighborhoods&&CogzidelSearch.params.neighborhoods.length>0&&SearchFilters.renderOneAppliedFilter("neighborhoods",SearchFilters.APPLIED_FILTER_NAMES.neighborhoods),(CogzidelSearch.params.price_max||CogzidelSearch.params.price_min)&&SearchFilters.renderOneAppliedFilter("price",SearchFilters.APPLIED_FILTER_NAMES.price),CogzidelSearch.params.hosting_amenities&&CogzidelSearch.params.hosting_amenities.length>0&&SearchFilters.renderOneAppliedFilter("hosting_amenities",SearchFilters.APPLIED_FILTER_NAMES.hosting_amenities),CogzidelSearch.params.room_types&&CogzidelSearch.params.room_types.length>0&&SearchFilters.renderOneAppliedFilter("room_types",SearchFilters.APPLIED_FILTER_NAMES.room_types),CogzidelSearch.params.keywords&&CogzidelSearch.params.keywords.length>0&&SearchFilters.renderOneAppliedFilter("keywords",SearchFilters.APPLIED_FILTER_NAMES.keywords),CogzidelSearch.params.property_type_id&&CogzidelSearch.params.property_type_id.length>0&&SearchFilters.renderOneAppliedFilter("property_type_id",SearchFilters.APPLIED_FILTER_NAMES.property_type_id),CogzidelSearch.params.min_bedrooms&&CogzidelSearch.params.min_bedrooms>0&&SearchFilters.renderOneAppliedFilter("min_bedrooms",SearchFilters.APPLIED_FILTER_NAMES.min_bedrooms),CogzidelSearch.params.min_beds&&CogzidelSearch.params.min_beds>0&&SearchFilters.renderOneAppliedFilter("min_beds",SearchFilters.APPLIED_FILTER_NAMES.min_beds),CogzidelSearch.params.min_bathrooms&&CogzidelSearch.params.min_bathrooms>0&&SearchFilters.renderOneAppliedFilter("min_bathrooms",SearchFilters.APPLIED_FILTER_NAMES.min_bathrooms),CogzidelSearch.params.languages&&CogzidelSearch.params.languages.length>0&&SearchFilters.renderOneAppliedFilter("languages",SearchFilters.APPLIED_FILTER_NAMES.languages),CogzidelSearch.params.connected&&SearchFilters.renderOneAppliedFilter("connections",SearchFilters.APPLIED_FILTER_NAMES.connections),CogzidelSearch.params.night_writer&&SearchFilters.renderOneAppliedFilter("night_writer",SearchFilters.APPLIED_FILTER_NAMES.night_writer),CogzidelSearch.includeCollectionParam()===!0&&(e=CogzidelSearch.isViewingStarred?SearchFilters.APPLIED_FILTER_NAMES.starred:SearchFilters.APPLIED_FILTER_NAMES.collection,CogzidelSearch.collectionName&&""!==CogzidelSearch.collectionName&&(e=[e,CogzidelSearch.collectionName].join(": ")),SearchFilters.renderOneAppliedFilter("collections",e)),CogzidelSearch.isViewingStarred&&(e=SearchFilters.APPLIED_FILTER_NAMES.starred,SearchFilters.renderOneAppliedFilter("starred",e)),CogzidelSearch.includeHostParam()){var r=SearchFilters.APPLIED_FILTER_NAMES.host;CogzidelSearch.hostName&&""!==CogzidelSearch.hostName&&(r=[r,CogzidelSearch.hostName].join(": ")),SearchFilters.renderOneAppliedFilter("host",r)}if(CogzidelSearch.includeGroupParam()){var a=SearchFilters.APPLIED_FILTER_NAMES.group;CogzidelSearch.groupName&&""!==CogzidelSearch.groupName&&(a=[a,CogzidelSearch.groupName].join(": ")),SearchFilters.renderOneAppliedFilter("group",a)}""===jQuery("#applied_filters").html()?jQuery("#results_filters").hide():jQuery("#results_filters").show()},appliedFilterXCallback:function(e){var r=!0,a=$(e).closest("li"),i=$(a).attr("id").replace("applied_filter_","");switch(i){case"neighborhoods":SearchFilters.clearNeighborhoods();break;case"price":SearchFilters.clearPrice();break;case"hosting_amenities":SearchFilters.clearAmenities();break;case"room_types":SearchFilters.clearRoomTypes();break;case"keywords":SearchFilters.clearKeywords();break;case"property_type_id":SearchFilters.clearPropertyTypes();break;case"min_bedrooms":SearchFilters.clearMinBedrooms();break;case"min_bathrooms":SearchFilters.clearMinBathrooms();break;case"min_beds":SearchFilters.clearMinBeds();break;case"languages":SearchFilters.clearLanguages();break;case"collections":SearchFilters.clearCollections();break;case"starred":SearchFilters.clearStarred();break;case"host":SearchFilters.clearHost();break;case"group":SearchFilters.clearGroup();break;case"connections":SearchFilters.clearConnections();break;case"night_writer":SearchFilters.clearNightWriter()}a.remove(),r===!0&&CogzidelSearch.loadNewResults()},clearStarred:function(){CogzidelSearch.isViewingStarred=!1},clearCollections:function(e){e=e||!0,CogzidelSearch.collectionId!==!1&&0!==jQuery.trim(CogzidelSearch.collectionName).length&&setTimeout(function(){0===jQuery("#reinstate_collections").length&&jQuery(["<a class='rounded_more reinstate_button' id='reinstate_collections'>Back to the  \"",CogzidelSearch.collectionName,'" Collection</a>'].join("")).insertBefore("#Search_Main")},1e3),CogzidelSearch.forceHideCollection=e},reinstateCollections:function(){CogzidelSearch.forceHideCollection=!1,jQuery("#location").val(""),CogzidelSearch.loadNewResults()},clearHost:function(){CogzidelSearch.hostId!==!1&&""!==CogzidelSearch.hostName&&setTimeout(function(){0===jQuery("#reinstate_user").length&&jQuery(["<a class='rounded_more reinstate_button' id='reinstate_user'>Back to properties from ",CogzidelSearch.hostName,"</a>"].join("")).insertBefore("#Search_Main")},1e3),CogzidelSearch.forceHideHost=!0},reinstateHost:function(){CogzidelSearch.forceHideHost=!1,jQuery("#location").val(""),CogzidelSearch.loadNewResults()},clearGroup:function(){CogzidelSearch.groupId!==!1&&""!==CogzidelSearch.groupName&&setTimeout(function(){0===jQuery("#reinstate_group").length&&jQuery(["<a class='rounded_more reinstate_button' id='reinstate_group'>Back to properties from ",CogzidelSearch.groupName,"</a>"].join("")).insertBefore("#Search_Main")},1e3),CogzidelSearch.forceHideGroup=!0},reinstateGroup:function(){CogzidelSearch.forceHideGroup=!1,jQuery("#location").val(""),CogzidelSearch.loadNewResults()},clearNeighborhoods:function(){jQuery("input[name='neighborhoods']").each(function(e,r){jQuery(r).attr("checked",!1)})},clearAmenities:function(){jQuery("input[name='amenities']").each(function(e,r){jQuery(r).attr("checked",!1)})},clearLanguages:function(){$("input[name='languages']").each(function(e,r){$(r).removeAttr("checked")})},clearConnections:function(){$("input[name='connected']").removeAttr("checked")},clearNightWriter:function(){$("input[name='night_writer']").removeAttr("checked")},clearKeywords:function(){var e=$("#keywords");delete CogzidelSearch.params.keywords,e.val(e.attr("defaultValue"))},clearRoomTypes:function(){$("input[name='room_types']").each(function(e,r){$(r).removeAttr("checked")})},clearPropertyTypes:function(){jQuery("input[name='property_type_id']").each(function(e,r){jQuery(r).attr("checked",!1)})},clearMinBedrooms:function(){jQuery("#min_bedrooms").val("")},clearMinBathrooms:function(){jQuery("#min_bathrooms").val("")},clearMinBeds:function(){jQuery("#min_beds").val("")},clearPrice:function(){SearchFilters.setPriceSliderLimits(SearchFilters.per_month,!0),SearchFilters.applyPriceSliderChanges()},renderOneAppliedFilter:function(e,r){$("#applied_filters").append($("#applied_filters_template").jqote({filter_id:e,filter_display_name:r},"*"))},renderNightWriter:function(){var e="#night_writer_container .search_filter_content";$(e).empty(),SearchFilters.buildCheckbox({elementId:"night_writer",elementName:"night_writer",htmlValue:"night_writer",label:Translations.night_writer,forceActive:!0,appendToElementSelector:e,checked:CogzidelSearch.params.night_writer})},renderSocialConnections:function(){var e=SearchFilters.connected&&SearchFilters.connected[0],r="#social_connections_container .search_filter_content";$(r).empty(),e&&SearchFilters.buildCheckbox({elementId:"connected",elementName:"connected",htmlValue:"connected",label:Translations.social_connections,facetCount:e[1],forceActive:!0,appendToElementSelector:r,checked:CogzidelSearch.params.connected}),$(r).append('<li><a href="/social/" target="_blank">'+Translations.learn_more+"!</a></li>")},renderRoomTypes:function(){jQuery("#room_type_container ul.search_filter_content").empty(),jQuery("#lightbox_filter_content_room_type").empty(),jQuery.each(SearchFilters.room_types,function(e,r){var a;a=CogzidelSearch.params.room_types&&jQuery.inArray(r[0],CogzidelSearch.params.room_types)>-1?!0:!1,SearchFilters.buildCheckbox({elementId:["room_type_",e].join(""),elementName:"room_types",htmlValue:r[0],label:r[1][0],facetCount:r[1][1],forceActive:!0,appendToElementSelector:"#room_type_container ul.search_filter_content",checked:a}),SearchFilters.buildCheckbox({elementId:["lightbox_room_type_",e].join(""),elementName:"room_types",htmlValue:r[0],label:r[1][0],forceActive:!0,facetCount:r[1][1],appendToElementSelector:"#lightbox_filter_content_room_type",checked:a})}),SearchFilters.appendShowMoreLink("#room_type_container ul.search_filter_content")},renderAmenities:function(){var e,r=0;return jQuery("#amenities_container ul.search_filter_content").empty(),jQuery("#lightbox_container_amenities ul.search_filter_content").empty(),parseInt(SearchFilters.top_amenities.length,10)>0&&jQuery.each(SearchFilters.top_amenities,function(a,i){e=CogzidelSearch.params&&CogzidelSearch.params.hosting_amenities&&jQuery.inArray(i[0].toString(),CogzidelSearch.params.hosting_amenities)>-1?!0:!1,a<SearchFilters.defaults.maxFilters&&SearchFilters.buildCheckbox({elementId:"amenity_"+a,elementName:"amenities",htmlValue:i[0],label:i[1][0],facetCount:i[1][1],checked:e,appendToElementSelector:"#amenities_container ul.search_filter_content"}),r++}),parseInt(SearchFilters.amenities.length,10)>0&&parseInt(SearchFilters.amenities.length,10)>r?(jQuery.each(SearchFilters.amenities,function(a,i){e=CogzidelSearch.params&&CogzidelSearch.params.hosting_amenities&&jQuery.inArray(i[0].toString(),CogzidelSearch.params.hosting_amenities)>-1?!0:!1,0===r&&SearchFilters.buildCheckbox({elementId:"amenity_"+r,elementName:"amenities",htmlValue:i[0],label:i[1][0],facetCount:i[1][1],checked:e,appendToElementSelector:"#amenities_container ul.search_filter_content"}),SearchFilters.buildCheckbox({elementId:"lightbox_amenity_"+r,elementName:"amenities",htmlValue:i[0],label:i[1][0],facetCount:i[1][1],checked:e,appendToElementSelector:"#lightbox_container_amenities ul.search_filter_content"}),r++}),SearchFilters.amenities.length>SearchFilters.defaults.maxFilters&&SearchFilters.appendShowMoreLink("#amenities_container ul.search_filter_content")):jQuery("#amenities_container").hide(),r>0&&jQuery("#amenities_container").show(),!0},renderNeighborhoods:function(){var e,r=0,a=!0;return jQuery("#neighborhood_container ul.search_filter_content").empty(),jQuery("#lightbox_container_neighborhood ul.search_filter_content").empty(),SearchFilters.top_neighborhoods&&parseInt(SearchFilters.top_neighborhoods.length,10)>0&&jQuery.each(SearchFilters.top_neighborhoods,function(i,o){a=!0,o[0].indexOf("'")>-1&&(a=!1),e=CogzidelSearch.params&&CogzidelSearch.params.neighborhoods&&jQuery.inArray(o[0],CogzidelSearch.params.neighborhoods)>-1?!0:!1,i<SearchFilters.defaults.maxFilters&&a&&SearchFilters.buildCheckbox({elementId:"neighborhood_"+i,elementName:"neighborhoods",htmlValue:o[0],label:o[1][0],facetCount:o[1][1],checked:e,appendToElementSelector:"#neighborhood_container ul.search_filter_content"}),r++}),SearchFilters.neighborhoods&&parseInt(SearchFilters.neighborhoods.length,10)>0&&parseInt(SearchFilters.neighborhoods.length,10)>r?(jQuery.each(SearchFilters.neighborhoods,function(i,o){a=!0,o[0].indexOf("'")>-1&&(a=!1),e=CogzidelSearch.params&&CogzidelSearch.params.neighborhoods&&jQuery.inArray(o[0],CogzidelSearch.params.neighborhoods)>-1?!0:!1,0===r&&a&&SearchFilters.buildCheckbox({elementId:"neighborhood_"+r,elementName:"neighborhoods",htmlValue:o[0],label:o[1][0],facetCount:o[1][1],checked:e,appendToElementSelector:"#neighborhood_container ul.search_filter_content"}),a&&SearchFilters.buildCheckbox({elementId:"lightbox_neighborhood_"+r,elementName:"neighborhoods",htmlValue:o[0],label:o[1][0],facetCount:o[1][1],checked:e,appendToElementSelector:"#lightbox_container_neighborhood ul.search_filter_content"}),r++}),SearchFilters.neighborhoods.length>SearchFilters.defaults.maxFilters&&SearchFilters.appendShowMoreLink("#neighborhood_container ul.search_filter_content")):jQuery("#neighborhood_container").hide(),r>0&&jQuery("#neighborhood_container").show(),!0},renderGenericLightboxFacet:function(e){var r;jQuery(["#lightbox_filter_content_",e].join("")).empty(),jQuery.each(SearchFilters[e],function(a,i){r=CogzidelSearch.params&&CogzidelSearch.params[e]&&void 0!==CogzidelSearch.params[e]&&jQuery.inArray(i[0].toString(),CogzidelSearch.params[e])>-1?!0:!1,SearchFilters.buildCheckbox({elementId:["lightbox_",e,"_",a].join(""),elementName:e,htmlValue:i[0],label:i[1][0],forceActive:!0,facetCount:i[1][1],appendToElementSelector:["#lightbox_filter_content_",e].join(""),checked:r})})},buildCheckbox:function(e){e=e||{};var r=!!e.checked,a=e.elementName||"",i=e.elementId||"",o=e.appendToElementSelector||"",t=e.label||"",n=e.htmlValue.toString()||"",s=e.facetCount,l=e.forceActive,c=(e.onChangecallbackFunction||SearchFilters.defaults.callbackFunction,s>0||r||l),d=["<li class='clearfix'>",s>0?["<span class='facet_count'>",s,"</span>"].join(""):"","<input type='checkbox' id='",i,"' name='",a,"' value='",n,"'",c?"":" disabled='disabled'",r?" checked='checked'":""," /> <label ",c?"":' class="disabled" ',"for='",i,"'>",t,"</label>","</li>"].join("");return o&&$(o).append(d),!1},appendShowMoreLink:function(e){return $(e).append("<li><a href='javascript:void(0);' class='show_more_link'>"+Translations.show_more+"</a></li>")},openFiltersLightbox:function(){$.colorbox({inline:!0,height:480,width:600,href:"#filters_lightbox"})},closeFiltersLightbox:function(){$.colorbox.close()},selectLightboxTab:function(e){var r=e||"room_type";$(".filters_lightbox_nav_element").removeClass("active"),$(".lightbox_filter_container").hide(),$("#lightbox_nav_"+r).addClass("active"),$("#lightbox_container_"+r).show()}},SS={initialized:!1,SHORT_TIMEOUT:50,LONG_TIMEOUT:675,FADE_DURATION:250,containerEl:jQuery("#page2_inline_slideshow"),imgEl:jQuery("#page2_inline_slideshow_img"),isFirstHover:!0,cloudFrontUrl:base_url+"images/",hoverTimeout:!1,pictureArrays:{},currentUrls:[],currentParentDivId:void 0,currentHostingId:void 0,currentPosition:0,addHostingAndIds:function(e,r){void 0===SS.pictureArrays[e]&&(SS.pictureArrays[e]=r)},fullImageUrl:function(e){var r=[SS.cloudFrontUrl,e].join("");return r},initOnce:function(){SS.initialized===!1&&SS.init()},init:function(){jQuery("#page2_inline_slideshow, .map_info_window_link_image").live("hover",function(){SS.hoverTimeout&&clearTimeout(SS.hoverTimeout),SS.isFirstHover===!0?(SS.hoverTimeout=setTimeout(function(){SS.next()},SS.SHORT_TIMEOUT),SS.isFirstHover=!1):SS.hoverTimeout=setTimeout(function(){SS.next()},SS.LONG_TIMEOUT)},function(){SS.reset()}),SS.initialized=!0},next:function(){var e,r;SS.totalPicturesSize()<=1||(e=SS.fullImageUrl(SS.pictureArrays[SS.currentHostingId][0]),SS.pictureArrays[SS.currentHostingId].push(SS.pictureArrays[SS.currentHostingId].shift()),r=SS.fullImageUrl(SS.pictureArrays[SS.currentHostingId][0]),SS.imgEl.attr("src",e),SS.imgEl.show(),SS.preloadImage(r,function(e){return function(){e===SS.currentHostingId&&("map"===CogzidelSearch.currentViewType?jQuery(".map_info_window").find("img").attr("src",r):jQuery(SS.currentParentDivId).find(".search_thumbnail").attr("src",r),SS.imgEl.fadeOut(SS.FADE_DURATION,function(){null===SS.hoverTimeout&&(SS.imgEl.attr("src",CogzidelSearch.PIXEL_PATH),SS.hoverTimeout=setTimeout(function(){SS.next()
},SS.LONG_TIMEOUT))}))}}(SS.currentHostingId)),SS.hoverTimeout=null)},show:function(e,r){SS.currentParentDivId=e,SS.currentHostingId=r,SS.attachToParent(),SS.containerEl.show()},hide:function(){SS.containerEl.hide()},attachToParent:function(){SS.currentParentDivId&&("map"==CogzidelSearch.currentViewType?(SS.containerEl.appendTo(SS.currentParentDivId),SS.containerEl.attr("href",jQuery(SS.currentParentDivId).find("a.image_link").attr("href"))):(SS.containerEl.appendTo(SS.currentParentDivId),SS.containerEl.attr("href",jQuery(SS.currentParentDivId).find("a.image_link").attr("href"))))},reset:function(){SS.hide(),SS.imgEl.hide(),clearTimeout(SS.hoverTimeout),SS.hoverTimeout=!1,SS.isFirstHover=!0},totalPicturesSize:function(){return SS.pictureArrays[SS.currentHostingId].length},preloadImage:function(e,r){var a=new Image;a.src=e,a.complete?(SS.hoverTimeout!==!1&&r(),a.onload=function(){}):a.onload=function(){SS.hoverTimeout!==!1&&r(),a.onload=function(){}}}};CogzidelSearch.$.bind("finishedrendering",function(){CogzidelSearch.updateFacebookBannerText()}),function(e,r){var a="has-mini-profile",i="mini-profile-container",o="/users/mini_profile/%USER_ID%";r.miniprofile=function(){r("body").delegate("."+a,"hover",function(e){("mouseenter"===e.type||"mouseover"===e.type)&&new t(r(this),e)})};var t=function(e,r){this.$t=e,this.userId=e.data("user_id"),this.pageX=r.pageX,this.pageY=r.pageY,this.padding=10,this.buffer=16,this.guid=(new Date).getTime(),this.init()};t.fn=t.prototype,t.fn.init=function(){var e=this;this.$t.data("mini-profile-attached")||(this.$t.data("mini-profile-attached",!0),r(document).bind("mousemove.mini_profile"+this.guid,function(r){e.pageX=r.pageX,e.pageY=r.pageY,e.isInHitbox()||e.kill()}),setTimeout(function(){e.isInHitbox()?e.show():e.kill()},500))},t.fn.isInHitbox=function(){if(!this.tCoords){var e=this.$t.offset();this.tCoords={top:e.top,left:e.left,width:this.$t.width(),height:this.$t.height()}}if(this.inCoords(this.tCoords))return!0;if(this.$el){if(!this.elCoords||this.elCoords.width!==this.$el.width()){var r=this.$el.offset();this.elCoords={top:r.top,left:r.left,width:this.$el.width(),height:this.$el.height()}}if(this.inCoords(this.elCoords))return!0;if(this.inBufferTriangle())return!0}return!1},t.fn.inCoords=function(e){return e=this.pad(e),this.pageX>=e.left&&this.pageX<=e.left+e.width&&this.pageY>=e.top&&this.pageY<=e.top+e.height},t.fn.pad=function(e){return r.extend({},e,{top:e.top-this.padding,left:e.left-this.padding,width:e.width+2*this.padding,height:e.height+2*this.padding})},t.fn.inBufferTriangle=function(){if(this.triCoords||(this.triCoords={top:this.tCoords.top,left:this.tCoords.left+this.tCoords.width,height:this.tCoords.height,width:this.elCoords.width-this.tCoords.width,sideTop:this.elCoords.top<this.tCoords.top}),!this.inCoords(this.triCoords,!1))return!1;var e=this.pad(this.triCoords),r=e.height/(e.width-2*this.padding),a=this.pageX-e.left-2*this.padding,i=this.pageY-e.top;return i>=r*a?this.triCoords.sideTop:!this.triCoords.sideTop},t.fn.show=function(){this.build(),this.position(),this.$el.css("visibility","visible").hide().fadeIn(100),this.loadContent()},t.fn.build=function(){this.$el=r('<div><div class="arrow"></div></div>').attr("id",i).addClass("loading").appendTo("body")},t.fn.position=function(e){var r=this.$t.offset(),a=this.$el.height(),i=e||r.top-(a+this.buffer);return this.showBelow(i)&&(i+=a+2*this.buffer+this.$t.height(),this.$el.addClass("below")),this.$el.css({left:r.left+"px",top:i+"px"}),i},t.fn.kill=function(){this.$el&&this.$el.fadeOut(100,function(){r(this).remove()}),r(document).unbind("mousemove.mini_profile"+this.guid),this.$t.data("mini-profile-attached",null)},t.fn.loadContent=function(){{var e,a,i,o,t=this,n=this.$el.offset(),s=this.$el.height();this.$el.width()}r.get(this.getUrl(),function(l){e=r(l).css("visibility","hidden").appendTo("body"),a=e.width(),i=e.height(),e.hide().css("visibility","visible").appendTo(t.$el),o=n.top+(s-i)*(t.showBelow(n.top)?0:1),t.showBelow(o)&&(o=t.$t.offset().top+t.$t.height()+t.buffer,t.$el.css("top",o+"px"),t.$el.addClass("below")),t.$el.animate({top:o,width:a,height:i},200,function(){e.fadeIn(200),t.$el.removeClass("loading")})})},t.fn.showBelow=function(e){return e<=r(document).scrollTop()},t.fn.getUrl=function(){return o.replace("%USER_ID%",this.userId)},e.MiniProfile=t}(Cogzidel,jQuery);